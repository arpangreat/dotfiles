/*! (c) Philipp KÃ¶nig under GPL-3.0 */
(e=>{"use strict";e.I18nHelper=function(t){let a=null,l={},g=null;this.init=()=>new Promise((e=>{t.helper.model.call("langvars").then((t=>{a=t.language,l=t.vars,g=t.dir,e()}))})),this.getLanguage=()=>a,this.isRtl=()=>"rtl"===g,this.getUILanguage=()=>e.api.i18n.getUILanguage(),this.getDefaultLanguage=()=>e.opts.manifest.default_locale,this.getLocaleSortCollator=()=>new Intl.Collator([this.getUILanguage(),this.getDefaultLanguage()]),this.getLocaleDate=e=>("number"==typeof e&&(e=new Date(e)),e.toLocaleDateString([this.getUILanguage(),this.getDefaultLanguage()],{year:"numeric",month:"2-digit",day:"2-digit"})),this.parseHtml=t=>{e(t).find("["+e.attr.i18n+"]").forEach((t=>{let a=null;const l=e(t).attr(e.attr.i18n);if(l){let g=[];const r=e(t).attr(e.attr.i18nReplaces);r&&(g=r.split(",")),a=this.get(l,g)}a?(e(t).removeAttr(e.attr.i18n),e(t).html(a)):e(t).remove()}))},this.get=(t,a=[],g=!1)=>{let r="";const n=l[t];return n&&n.message&&(r=n.message,r=r.replace(/\{browserName\}/gi,e.browserName),a&&a.length>0&&a.forEach(((e,t)=>{r=r.replace(new RegExp("\\{"+(t+1)+"\\}"),e)})),r=r.replace(/\[b\](.*)\[\/b\]/,"<strong>$1</strong>"),r=r.replace(/\[a\](.*)\[\/a\]/,"<a href='#'>$1</a>"),r=r.replace(/\[em\](.*)\[\/em\]/,"<em>$1</em>")),g&&(r=r.replace(/'/g,"&#x27;")),r}}})(jsu);