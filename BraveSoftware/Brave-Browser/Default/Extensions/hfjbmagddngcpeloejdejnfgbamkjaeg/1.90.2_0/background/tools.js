"use strict";var e={r:function(n,t){return"vimiumContent|"+n+(t?"|"+t:"")},dr:function(t,e){var o=chrome.contentSettings;try{o&&o.images.get({primaryUrl:"https://127.0.0.1/"},r.x)}catch(n){o=null}return o?o[t]&&!/^[A-Z]/.test(t)&&o[t].get?!(!e.startsWith("read:")&&r.D.test(e)&&!e.startsWith(v))&&(a.dr(n("changeItsCS")),true):(a._r(n("unknownCS",[t])),true):(a._r("Has not permitted to set contentSettings"),true)},c:function(t,e){var o,i,c,u,l,s,_,d,g,m;if(t.startsWith("file:"))return(o=f>=56?1:e>1?2:0)?(a.dr(1===o?n("setFileCS",[56]):n("setFolderCS")),[]):[t.split(/[?#]/,1)[0]];if(t.startsWith("ftp:"))return a.dr(n("setFTPCS")),[];if(i=t.match(/^([^:]+:\/\/)([^\/]+)/),c=r.A.exec(i[2]),u=[(t=i[1])+(l=c[3]+(c[4]||""))+"/*"],e<2||r.Z(c[3],0))return u;for(c=null,_=(s=r.ie(l))[0],d=s[1],g=Math.min(_.length-d,e-1),m=0;m<g;m++)l=l.slice(_[m].length+1),u.push(t+l+"/*");return u.push(t+"*."+l+"/*"),g===_.length-d&&"http://"===t&&u.push("https://*."+l+"/*"),u},a:function(n){var t,e,r;for(e of n._t){if(r=new URL(e.s.je).host,t&&t!==r)return true;t=r}return false},g:function(n,t){var o=chrome.contentSettings[n];null==t?(o.clear({scope:"regular"}),o.clear({scope:"incognito_session_only"},r.x),localStorage.removeItem(e.r(n))):o.clear({scope:t?"incognito_session_only":"regular"})},lr:function(t,r){var o=""+t.type;if(!e.dr(o,"http://a.cc/"))return e.g(o,r?r.s.Tn:2===m.Tn),a._r(n("csCleared",[n(o)||o]))},fr:function(n,t,r){var o=""+n.type,i=r[0];return n.incognito?e.m(t,o,i):e.v(o,t,i,"reopen"===n.action)},v:function(n,t,o,i){var c=r.oe(o.url);e.dr(n,c)||chrome.contentSettings[n].get({primaryUrl:c,incognito:o.incognito},function(u){e.k(n,c,t,{scope:o.incognito?"incognito_session_only":"regular",setting:u&&"allow"===u.setting?"block":"allow"},function(t){var c,u,l;if(!t)return o.incognito||(c=e.r(n),"1"!==localStorage.getItem(c)&&localStorage.setItem(c,"1")),l=f>=70&&(u=a.wt(o.id))&&u._t.length>1&&e.a(u),o.incognito||i?a.sr(o):o.index>0?a.sr(o,l?0:2):void chrome.windows.getCurrent({populate:true},function(n){return n&&"normal"===n.type?a.sr(o,l?0:n.tabs.length>1?2:1):chrome.tabs.reload(r.x),r.x()})})})},m:function(n,t,o){if(l.L.It)return a.dr("setIncogCS");var i=r.oe(o.url);e.dr(t,i)||chrome.contentSettings[t].get({primaryUrl:i,incognito:true},function(c){return r.x()?(chrome.contentSettings[t].get({primaryUrl:i},function(r){r&&"allow"===r.setting||chrome.windows.create({type:"normal",incognito:true,focused:false,url:"about:blank"},function(r){var c=r.tabs[0].id;return e.H(n,t,o,i,r.id,true,function(){chrome.tabs.remove(c)})})}),r.x()):c&&"allow"===c.setting&&o.incognito?e.gr(o):void chrome.windows.getAll(function(r){var a,u,l;if((r=r.filter(function(n){return n.incognito&&"normal"===n.type})).length)return a=r.find(function(n){return n.id===m.Jn})||r[r.length-1],c&&"allow"===c.setting?e.gr(o,a.id):(u=o.windowId,l=o.incognito&&r.some(function(n){return n.id===u}),e.H(n,t,o,i,l?void 0:a.id));console.log("%cContentSettings.ensure","color:red","get incognito content settings",c," but can not find an incognito window.")})})},H:function(n,t,r,o,i,c,a){var u=e.mr.bind(null,r,i,a);return e.k(t,o,n,{scope:"incognito_session_only",setting:"allow"},c&&i!==r.windowId?function(n){if(n)return u(n);chrome.windows.get(r.windowId,u)}:u)},k:function(n,t,o,i,c){var a,u,l=false,s=chrome.contentSettings[n],_=function(){var n=r.x();return n&&console.log("[%o]",Date.now(),n),l||(--d,((l=!!n)||0===d)&&setTimeout(c,0,l)),n},f=e.c(t,0|o),d=f.length;if(d<=0)return c(true);for(a of(r.T(i),f))(u=r.i(r.C(),i)).primaryPattern=a,s.set(u,_)},mr:function(n,t,r,o){true!==o&&e.gr(n,t),r&&r(),true!==o&&t&&chrome.windows.update(t,{focused:true,state:o?o.state:void 0})},gr:function(n,t){n.active=true,"number"==typeof t&&n.windowId!==t&&(n.index=void 0,n.windowId=t),a.sr(n)}},j={me:localStorage,vr:null,lt:function(n,t,e){var r,o,c,a=n.l,u=n.n,l=n.u,s=n.s;a&&0===s[0]&&0===s[1]&&(2===s.length?(r=l.indexOf("#"))>0&&r<l.length-1&&s.push(l.slice(r)):(s[2]||"").length<2&&s.pop()),o=j.hr(u,a?l:""),c=JSON.stringify(a?s:{tabId:e,url:l,scroll:s}),t?(j.vr||(i.Br(),j.vr=new Map)).set(o,c):j.me.setItem(o,c)},or:function(n,t){var e=t.s.un;n.s?j.lt(n,t.s.Tn,e):(t=a.wt(e,0)||t)&&t.postMessage({N:11,n:n.n})},ir:function(t,e){var o,i,c,u,l,s,_,f=t.l,d=t.n,g=j.hr(d,f?t.u:""),m=e.s.Tn&&j.vr&&j.vr.get(g)||j.me.getItem(g);if(f&&((o=m?JSON.parse(m):null)||(c=void 0,u=void 0,(i=t.o)&&(c=+i.x)>=0&&(u=+i.y)>=0&&(t.s=o=[c,u,i.h])),o))e.postMessage({N:15,l:2,n:d,s:o});else{if(!m)return a._r(n("noMark",[n(f?"Local_":"Global_"),d]));if(s=+(l=JSON.parse(m)).tabId,(_={u:l.url,s:l.scroll,t:l.tabId,n:d,p:true,q:t.q}).p=false!==t.p&&0===_.s[1]&&0===_.s[0]&&!!r.Oe(_.u),!(s>=0&&a.wt(s)))return a.hn[19](_);chrome.tabs.get(s,j.pr.bind(0,_))}},pr:function(n,t){var e=(t.url||t.pendingUrl).split("#",1)[0];return e===n.u||n.p&&n.u.startsWith(e)?(a.hn[5]({s:t.id}),j.Yn(n,t)):a.hn[19](n)},hr:function(n,t){return t?"vimiumMark|"+r.Ae(t.split("#",1)[0])+(t.length>1?"|"+n:""):"vimiumGlobalMark|"+n},Yn:function(n,t){var e=t.id,r=a.wt(e,0);if(r&&r.postMessage({N:15,l:0,n:n.n,s:n.s,f:n.f}),n.t!==e&&n.n)return j.lt(n,2===m.Tn,e)},ur:function(t){var e,r,o,i,c,u=j.hr("",t),l=[],s=j.me;for(e=0,r=s.length;e<r;e++)(o=s.key(e)).startsWith(u)&&l.push(o);for(o of l)s.removeItem(o);return i=l.length,(c=j.vr)&&c.forEach(function(n,t){t.startsWith(u)&&(i++,c.delete(t))}),a._r(n("markRemoved",[i,n(t?"#"===t?"allLocal":"41":"39"),n(1!==i?"have":"has")]))}},h={Rn:"findModeRawQueryList",kr:null,Sr:null,Cr:0,Ur:function(){var n=l.it(h.Rn);h.kr=n?n.split("\n"):[],h.Ur=null},nr:function(n,t,e){var o,c,a=h;return a.Ur&&a.Ur(),o=n?a.Sr||(i.Br(),a.Sr=a.kr.slice(0)):a.kr,t?(t=t.replace(/\n/g," "),n?a.wr(t,o,true):((c=a.wr(t=r.j(t,0,99),o))&&l.lt(a.Rn,c),a.Sr?a.wr(t,a.Sr,true):void 0)):o[o.length-(e||1)]||""},wr:function(n,t,e){var r=t.lastIndexOf(n);if(r>=0){if(r===t.length-1)return;t.splice(r,1)}else t.length>=50&&t.shift();if(t.push(n),!e)return t.join("\n")},cr:function(n){n?h.Sr&&(h.Sr=[]):(h.Ur=null,h.kr=[],l.lt(h.Rn,""))}},i={br:false,Cr:0,Br:function(){i.br||(chrome.windows.onRemoved.addListener(i.yr),i.br=true)},yr:function(){i.br&&(i.Cr=i.Cr||setTimeout(i.Ir,34))},Ir:function(){var n;if(i.Cr=0,f>51)for(n of a.wt().values())if(n.bn.s.Tn)return;chrome.windows.getAll(function(n){n.some(function(n){return n.incognito})||i.Mr()})},Mr:function(){h.Sr=null,j.vr=null,chrome.windows.onRemoved.removeListener(i.yr),i.br=false}},k={Tr:[f>=74?2:0,f>=76?2:0],Nr:0,it:function(n){var t=k.Tr[n];return"object"==typeof t?t.matches:null},jr:function(n,t){var e,r=k,o=r.Tr,i=o[n],c=n?"prefers-color-scheme":"prefers-reduced-motion";1===i&&t&&(o[n]=i=matchMedia("("+c+")").matches?2:0),t&&2===i?((e=matchMedia("("+c+": "+(n?"dark":"reduce")+")")).onchange=r.Ar,o[n]=e,r.Nr||f<1e3&&(r.Nr=setInterval(k.Lr,6e4)),r.Or(n,0)):t||"object"!=typeof i||(i.onchange=null,o[n]=2,r.Nr>0&&(o.some(function(n){return"object"==typeof n})||(clearInterval(r.Nr),r.Nr=0)),r.Or(n,0))},Or:function(n,t){var e,r,o,i,c,u,s=k.Tr[n];r=(e=l).Pe,o=n?"dark":"less-motion",u=e.pt(c=n?"d":"m",i=!!("object"==typeof s)&&s.matches),r[c]!==u&&(r[c]=u,t||e.dt({N:6,d:[c]})),a.hn[25]({t:o,e:i||(" "+e.me.vomnibarOptions.styles+" ").includes(" "+o+" "),b:!t})},Lr:function(){var n,t;for(t=(n=k.Tr).length;0<=--t;)"object"==typeof n[t]&&k.Or(t)},Ar:function(){k.Nr>0&&clearInterval(k.Nr),k.Nr=-1;var n=k.Tr.indexOf(this);n>=0&&k.Or(n)}},m={Xn:new Map,Pn:chrome.tabs.TAB_ID_NONE||-1,yn:chrome.windows.WINDOW_ID_NONE||-1,Jn:-1,Tn:1,tr:null};r.De(120,function(){function n(n){var e,r,o;n.windowId===m.yn?((e=performance.now())-_>666&&(r=u.get(m.Pn),o=1===l.Pe.o?Date.now():e,r?(r.i=++s,r.t=o):u.set(m.Pn,{i:++s,t:o}),s>2037&&chrome.tabs.query({},f)),m.Pn=n.tabId,_=e):chrome.windows.get(n.windowId,t)}function t(n){if(n.focused){var t=n.id,e=m.yn;t!==e&&(m.Jn=e,m.yn=t),chrome.tabs.query({windowId:t,active:true},function(n){n&&n.length>0&&t===m.yn&&o(n)})}}function o(t){if(!t||0===t.length)return r.x();var e=t[0],o=e.windowId,i=m.yn;o!==i&&(m.yn=o,m.Jn=i),m.Tn=e.incognito?2:1,d.Rr(),n({tabId:e.id,windowId:o})}var i,c,a=m.yn,u=m.Xn,s=1,_=0,f=function(n){var t=n?n.map(function(n){return[n.id,u.get(n.id)]}).filter(function(n){return n[1]}).sort(function(n){return n[1].i}):[];t.length>1023&&t.splice(0,t.length-1023),t.forEach(function(n,t){return n[1].i=t+2}),(s=t.length>0?t[t.length-1][1].i:1)>1?u=m.Xn=new Map(t):(u.forEach(function(n,t){n.i<1026?u.delete(t):n.i-=1024}),s=1024)};for(c of(chrome.tabs.onActivated.addListener(n),chrome.windows.onFocusChanged.addListener(function(n){n!==a&&chrome.tabs.query({windowId:n,active:true},o)}),chrome.tabs.query({currentWindow:true,active:true},function(n){_=performance.now();var t=n&&n[0];if(!t)return r.x();m.Pn=t.id,m.yn=t.windowId,m.Tn=t.incognito?2:1}),m.tr=function(n,t){return u.get(t.id).i-u.get(n.id).i},(i=l).ft.autoDarkMode=i.ft.autoReduceMotion=function(n,t){k.jr(t.length>12?0:1,n)},i.gt("autoDarkMode"),i.gt("autoReduceMotion"),i.kt=k.Or,i.yt=k.Lr,["images","plugins","javascript","cookies"]))null!=localStorage.getItem(e.r(c))&&chrome.contentSettings&&setTimeout(e.g,100,c)}),l.Ge.Xe=function(){var t,e,r;for(l.Ge.Xe=null,t=l.ot=[],e=["$1","$2","$3","$4"],r=0;r<120;r++)t.push(n(""+r,e))},l.Ge.Qe|=2,a.Yt(),chrome.extension.isAllowedIncognitoAccess(function(n){l.L.It=false===n});