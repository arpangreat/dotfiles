"use strict";r.De(200,function(){function t(t){var e,u,l;p||t.v||(t.v=W.xr(t.u)),null==t.textSplit?(t.title=n(t.title),e=t.t,l=(u=r.Re(e)).length!==e.length?(function(t,n){for(var e=o(t),r=0;r<e.length;)e[r+1]<=n?e.splice(r,2):(e[r]=Math.max(e[r]-n,0),e[r+1]-=n,r+=2);return e})(e,"\\"===u[0]?5:8):o(u=i(e)),t.t=e.length!==t.u.length?u:"",t.textSplit=s(u,l,e.length-u.length,p?U-13-Math.min(t.title.length,40):U)):t.t===t.u&&(t.t="")}function n(t,n){var i=t.length>U+40;return i&&(t=r.j(t,0,U+39)),e(i?t+"\u2026":t,n||o(t))}function e(t,n){var e,i,o,u,l;if(0===n.length)return r.$(t);for(e="",i=0,o=0;o<n.length;o+=2)l=n[o+1],(u=n[o])>=t.length||(e+=r.$(t.slice(i,u)),e+="<match>",e+=r.$(t.slice(u,l)),e+="</match>",i=l);return e+r.$(t.slice(i))}function i(t){var n=r.Oe(t);return!n||n>=t.length?t:t.slice(n,t.length-+(t.endsWith("/")&&!t.endsWith("://")))}function o(t){var n,e,r,i,o,l,f,s,c,a,_,g=[];for(n=0,e=k.length;n<e;n++)for(r=0,i=0,o=void 0,f=(l=t.split(G.Dr[n])).length-1,s=k[n].length;r<f;r++,i=o)o=(i+=l[r].length)+s,g.push([i,o]);if(0===g.length)return g;if(1===g.length)return g[0];for(g.sort(u),c=g[0],n=1,a=1,e=g.length;a<e;a++)c[n]>=(_=g[a])[0]?c[n]<_[1]&&(c[n]=_[1]):(c.push(_[0],_[1]),n+=2);return c}function u(t,n){return t[0]-n[0]}function s(t,n,e,i){var o,u,l,f,s,c="",a=t.length,_=a,g="";if(a<=i||(e>1?_=t.indexOf("/")+1||a:(_=t.indexOf(":"))<0?_=a:r.D.test(t.slice(0,_+3).toLowerCase())?_=t.indexOf("/",_+4)+1||a:_+=22),_<a&&n.length)for(o=n.length,u=a+8;(o-=2)>-4&&u>=_;u=o<0?0:n[o])if(l=o<0?_:n[o+1],(f=u-20-Math.max(l,_))>0&&(a-=f)<=i){_=l+(i-a);break}for(a=0,o=0;a<i&&o<n.length;o+=2)(f=(u=n[o])-20-(s=Math.max(a,_)))>0?(i+=f,g=r.j(t,a,s+11),c+=r.$(g),c+="\u2026",g=r.z(t,u-8,u),c+=r.$(g)):a<u&&(g=t.slice(a,u),c+=r.$(g)),g=t.slice(u,a=n[o+1]),c+="<match>",c+=r.$(g),c+="</match>";return t.length<=i?(g=t.slice(a),c+r.$(g)):(g=r.j(t,a,i-1>a?i-1:a+10),c+r.$(g)+"\u2026")}function c(t){return H.Er(t.t,t.title)}function a(t){var n=(t-H.Pr)/18144e5;return n<0?0:n<1?n*n*.666667:n<1.000165?.666446:0}function _(t,n,e){var r=a(e),i=H.Er(t,n);return r<=i?i:(i+r)/2}function g(t,n){return n}var v=0,h=null,S=false,p=false,B=0,U=0,y=0,b=0,w=0,T=0,k=[""],x="",R="",M="",C="",O=0,D=false,I=false,E="",N="",j=0,P=null,$=true,F=function(t,n,e,r,i,o){this.e=t,this.u=n,this.t=e,this.title=r,this.r=i(this,o),this.visit=0},J=performance,V={$r:[],Fr:[],Jr:null,Vr:"",qr:0,dn:0,rr:function(t,n){if(0!==k.length&&1&j)2===V.dn?V.Wr():V.Jr=t;else if(z.zr([],1),n)return;0===V.dn&&V.Qr()},Hr:function(t){return 47===t.charCodeAt(0)},Wr:function(){var t,e,r,i,o,l,f,s,c,a=k.some(V.Hr),_=!!Y.Kr,m=[],d=Y.Gr&&Y.Gr.$r||V.$r,v=d.length,h=[];for(e=0;e<v;e++)if(H.Xr((r=d[e]).t,a?r.Vr:r.Zr)&&($||r.Yr)){if(_&&m.push(r),N&&r.u.length<N.length+2&&N===(r.u.endsWith("/")?r.u.slice(0,-1):r.u))continue;h.push([-H.Er(r.t,r.Zr),e])}for(l of(_&&(Y.Kr.$r=m),w+=t=h.length,t?(h.sort(u),T>0&&!(6&j)?(h=h.slice(T,T+y),T=0):t>T+y&&(h.length=T+y)):j^=1,i=[],o=64&B?-.666446:0,h))f=l[0],o&&(f=f<o?f:(f+o)/2),s=new F("bookm",(r=d[e=l[1]]).u,r.t,a?r.Vr:r.Zr,g,-f),c=32&B&&X.ti?X.ni(r.u):-1,s.visit=c<0?0:X.ri[c].ei,i.push(s),null!==r.ii&&(s.u=r.ii,s.title=n(a?r.Vr:r.Zr),s.textSplit="javascript: \u2026",s.t=r.oi);z.zr(i,1)},ui:function(){var t=chrome.bookmarks;t.onCreated.addListener(V.li),t.onRemoved.addListener(V.fi),t.onChanged.addListener(V.fi),t.onMoved.addListener(V.li),t.onImportBegan.addListener(function(){chrome.bookmarks.onCreated.removeListener(V.li)}),t.onImportEnded.addListener(function(){var t=V.li;chrome.bookmarks.onCreated.addListener(t),t()})},Qr:function(){V.dn=1,V.Nr&&(clearTimeout(V.Nr),V.Nr=0),chrome.bookmarks.getTree(V.si)},si:function(t){V.dn=2,V.$r=[],V.Fr=[],Y.ur(2),t.forEach(V.ci,V);var n=V.Jr;if(V.Jr=null,setTimeout(function(){return nt.ai(V.$r)},50),V.ui&&(setTimeout(V.ui,0),V.ui=null),n&&!n.o)return V.Wr()},ci:function(t){var n,e,i,o=t.title,u=t.id,l=V.Vr+"/"+(o||u);if(t.children)return V.Fr.push(u),n=V.Vr,2<++V.qr&&(V.Vr=l),t.children.forEach(V.ci,V),--V.qr,void(V.Vr=n);i=(e=t.url).startsWith("javascript:"),V.$r.push({_i:u,Vr:l,Zr:o||u,t:i?"javascript:":e,Yr:P?Z.gi(e,o):1,u:i?"javascript:":e,ii:i?e:null,oi:i?r.W(e):null})},Nr:0,mi:0,di:false,vi:function(){var t=J.now()-V.mi;0===V.dn&&(t>=6e4||t<-5e3?(V.Nr=V.mi=0,V.di=false,V.Qr()):(V.$r=[],V.Fr=[],V.Nr=setTimeout(V.vi,3e4),Y.ur(2)))},li:function(){V.mi=J.now(),V.dn<2||(V.Nr=setTimeout(V.vi,6e4),V.dn=0)},fi:function(t,n){for(var e,r,i,o,u,l,f=V.$r,s=f.length,c=n&&n.title,a=0;a<s&&f[a]._i!==t;a++);if(a<s)return r=(e=f[a]).u,i=n&&n.url,nt.hi&&(null==c?r!==e.t||!n:null!=i&&r!==i)&&nt.Si.has(r)&&X.ti&&X.ni(r)<0&&nt.Si.delete(r),void(null!=c?(e.Vr=e.Vr.slice(0,-e.Zr.length)+(c||e._i),e.Zr=c||e._i,i&&(e.u=i,e.t=nt.pi(i,e),nt.Bi()),P&&(e.Yr=Z.gi(e.u,e.Zr))):(f.splice(a,1),n||V.li()));if(!(V.Fr.indexOf(t)<0)){if(null!=c)return V.li();if(!V.di&&nt.hi){for(l of(o=nt.Si,u=X.ni,X.ti?f:[]))o.has(r=l.u)&&u(r)<0&&o.delete(r);V.di=true}return V.li()}}},A={rr:function(t,n){var e,r,i,o,u,l;if(!k.length&&1024&B||!(2&j))return z.zr([],2);if(r=k.length>0,e=X.ri){if(r)return z.zr(A.Ui(e),2);(X.yi>10||X.bi>0)&&X.wi()}else if(i=r?function(n){if(!t.o)return z.zr(A.Ui(n),2)}:null,r&&(p||X.Ti)?(X.Ti>0&&clearTimeout(X.Ti),X.Ti=0,X.ki(i)):(X.Ti||(X.Ti=setTimeout(function(){X.Ti=0,X.ki(i)},r?200:150)),r&&z.xi((l=(u=(o=z.Ri).length)>0)&&"search"===o[0].t?[o[0]]:[],S&&l,0,0,u,R,O)),r)return;S=false,0===n?z.Mi(A.Ci,t):chrome.sessions?chrome.sessions.getRecentlyClosed(A.Oi.bind(A,t)):A.Di([],t,new Set,0,0)},Ui:function(t){var n,e,i,o,u=1===k.length?k[0]:"",l=u&&("."===u[0]?/^\.[\da-zA-Z]+$/.test(u):(r.K(u,null,-2),r.V<=2)),f=l?"."===u[0]||r.V>0?G.Dr[0]:(G.Ii||G.Ei(),G.Ii[0]):null,s=!(Y.Gr&&Y.Gr.ri),c=Y.Kr?[]:null,m=[-1.1,-1.1],d=[],v=H.Xr,h=l&&u.includes("%")&&!/[^\x21-\x7e]|%[^A-F\da-f]/.test(u),S=y+T,p=-1.1,B=0,U=0,b=0;for(E&&S++,U=S;--U;)m.push(-1.1,-1.1);for(S=2*S-2,s||(t=Y.Gr.ri),n=t.length;B<n;B++)if(e=t[B],(l?f.test(h?e.u:e.t):v(e.t,e.Zr))&&($||e.Yr)&&(c&&c.push(e),b++,(i=l?a(e.ei)||1e-16*Math.max(0,e.ei):_(e.t,e.Zr,e.ei))>p)){for(U=S-2;0<=U&&m[U]<i;U-=2)m[U+2]=m[U],m[U+3]=m[U+1];m[U+2]=i,m[U+3]=B,p=m[S]}for(c&&(Y.Kr.ri=c),w+=b,b||(j^=2),5&j?B=0:(B=2*T,T=0);B<=S&&!((i=m[B])<=0);B+=2)(e=t[m[B+1]]).u!==E&&((o=new F("history",e.u,h?e.u:e.t,e.Zr,g,i)).visit=e.ei,d.push(o));return nt.Bi(),d},Ci:function(t,n){var e,r,i,o;if(Y.Ni(n),!t.o){for(i of(e=new Set,r=0,n))i.incognito&&h||e.has(o=i.url||i.pendingUrl)||(e.add(o),r++);return A.Di([],t,e,T,r)}},Oi:function(t,n){var e,r,i;if(!t.o)return e=[],r=new Set,i=-T,n.some(function(t){var n,o,u,l=t.tab;return!!l&&((n=l.url).length>2e3&&(l.url=n=X.ji(n,l)),!(!$&&!Z.gi(n,l.title))&&!r.has(o=n+"\n"+l.title)&&(r.add(o),r.add(n),++i>0&&e.push({u:l.url,Zr:l.title,Pi:(u=t.lastModified,u<3e11&&u>-4e10?1e3*u:u),$i:l.sessionId}),e.length>=y))})?A.Fi(e):A.Di(e,t,r,-i,0)},Di:function(t,n,e,r,i){chrome.history.search({text:"",maxResults:T+y*($?1:2)+i},function(i){if(!n.o){i=i.filter(function(t){var n=t.url;return n.length>2e3&&(t.url=n=X.ji(n,t)),!e.has(n)&&($||0!==Z.gi(t.url,t.title||""))}),r<0?i.length=Math.min(i.length,y-t.length):r>0&&(i=i.slice(r,r+y));var o=i.map(function(t){return{u:t.url,Zr:t.title,Pi:t.lastVisitTime,$i:null}});r<0&&(o=t.concat(o)),A.Fi(o)}})},Fi:function(t){t.forEach(A.Ji),T=0,nt.Bi(),z.zr(t,2)},Ji:function(t,n,e){var r=t.u,i=new F("history",r,nt.pi(r,r),t.Zr||"",g,(99-n)/100),o=t.$i;i.visit=t.Pi,o&&(i.s=o,i.label='<span class="undo">&#8630;</span>'),e[n]=i}},L={rr:function(t,n){if(1!==k.length||!(16&j)||k[0].lastIndexOf("/",k[0].length-2)>=0)return z.zr([],16);if(X.M);else{if(!X.ri)return n>0?z.zr([],16):X.ki(function(){if(!t.o)return L.rr(t,0)});L.Qr(X.ri)}return L.Wr()},Wr:function(){var t,n,e,i,o,u,l,f,s,c,a,g,m,d=r.M,v=H.Vi,h=16===j&&S?[]:null,p=k[0].replace("/","").toLowerCase(),B=p===k[0],U=[],b="",x=-1.1;for(H.Vi=3,i=d.keys(),o=void 0;!(o=i.next()).done;)(n=o.value).includes(p)&&(t=d.get(n),($||t.Ai>0)&&(e=_(n,"",t.ei),h?h.push({r:e,d:n,m:t}):e>x&&(x=e,b=n)));if(u=b.length===p.length,b&&!u&&(b.startsWith("www.")||b.startsWith(p)||(l=b.slice(b.indexOf(".")+1)).includes(p)&&(f=void 0,(f=d.get(l="www."+l))?($||f.Ai>0)&&(b=l,t=f):(f=d.get(l="m."+l))&&($||f.Ai>0)&&($||f.Ai>0)&&(b=l,t=f)),(s=b.startsWith(p)?0:b.startsWith("www."+p)?4:-1)>=0&&(m=(a=(c=r.ie(b))[0]).length-1,(g=c[1])>1&&(!(s=b.length-s-p.length-a[m].length-1)||3===g&&s===a[m-1].length+1)&&(u=true))),b)w++,S=!T&&u||S,U=L.Li(b,t,0,B);else if(h)for(m of(h.sort(L.qi),(w=h.length)>T+y&&(h.length=T+y),h))U.push(L.Li(m.d,m.m,m.r,B)[0]);H.Vi=v,z.zr(U,16)},Li:function(e,r,i,o){var u,l,f,s,c,a,_,m,d=r.ae>0,v="";return 2===V.dn&&(u=new RegExp("^https?://"+e.replace(K,"\\$&")+"/?$"),(l=V.$r.filter(function(t){return u.test(t.u)&&($||t.Yr)})).length>0&&(f=l.filter(function(t){return"s"===t.u[4]}),N=(s=(l=(d=f.length>0)?f:l)[0].u).endsWith("/")?s.slice(0,-1):s,v=l[0].Zr)),c=(d?"https://":"http://")+e+"/",!i&&(E=c,T>0)?(T--,[]):(a=new F("domain",c,o?e:e+"/","",g,i||2),m=(_=X.ti?X.ni(c):-1)>0?X.ri[_]:null,t(a),m&&($||m.Yr)&&(a.visit=m.ei,v=v||m.Zr),a.title=n(v,[]),--y,[a])},Qr:function(t){var n,e,i,o,u,l,f,s,c;for(i of(L.Qr=null,n=L.Wi,e=X.M=r.M,t))o=i.ei,u=i.Yr,(l=n(i.u))&&(s=l.zi,(c=e.get(f=l.Qi))?(c.ei<o&&(c.ei=o),c.Ai+=u,s>=7&&(c.ae=8===s?1:0)):e.set(f,{ei:o,Ai:u,ae:8===s?1:0}))},Wi:function(t){var n,e,r=t.lastIndexOf(":",5),i=r>0?t.slice(0,r):"";if("http"===i)n=7;else if("https"===i)n=8;else{if("ftp"!==i)return null;n=6}return e=t.indexOf("/",n),{Qi:"__proto__"!==(t=t.slice(n,e<0?t.length:e))?t:".__proto__",zi:n}},qi:function(t,n){return n.r-t.r}},q={rr:function(t,n){!(4&j)||n&&(!k.length||256&B)?z.zr([],4):z.Mi(q.Wr,t)},Wr:function(t,n){var e,i,o,u,s,a,_,g,d,v,S,U,x,R,M,C,O,D,E,N,P,$,J,V,A,L,W,Q,K,G,X,Z,tt,et,rt,it,ot;if(Y.Ni(n),!t.o){if(e=m.Pn,i=k.length<=0,o=3&j,s=[],(u=!!(8&B)&&I&&i&&!p)&&!(128&B)&&n.length>T&&n.length>b){for(_ of(a=new Map,n))a.set(_.id,_);for(S=(v=(d=(g=a.get(e))?g.openerTabId:0)?a.get(d):null)?v.index:g?g.index-1:0,U=v?0:b/2|0;1<--U&&S>0&&n[S-1].openerTabId===d;S--);n=S>0?n.slice(S).concat(n.slice(0,S)):n}for(_ of(x=[],R=[],M=!i&&/^:[a-z]+/gm.test(k.join("\n")),n))!I&&h&&_.incognito||(C=_.url||_.pendingUrl,O=_.text||(_.text=nt.pi(C,_.incognito?"":C)),D=_.title,M&&(1===k.length&&(O=D=""),_.audible&&(D+=" :audible :audio",D+=_.mutedInfo.muted?" :muted":" :unmuted"),_.discarded&&(D+=" :discarded"),_.incognito&&(D+=" :incognito"),_.pinned&&(D+=" :pinned")),(i||H.Xr(O,D))&&(E=_.windowId,!I&&R.lastIndexOf(E)<0&&R.push(E),x.push(_)));if(o&&1===x.length&&x[0].id===m.Pn&&(x.length=0),w+=N=x.length,N||(j^=4),T>=N&&!o)return T=0,z.zr(s,4);if(R.sort(q.Hi),P=i?u?q.Ki:q.Gi:c,$=u?r.C():null,J=R.length>1?m.yn:0,u)for(_ of x)$[_.id]=(A=(V=_.openerTabId)&&$[V])?A<5?A+1:5:1;for(L=32&B?1===l.Pe.o?0:f<62?Date.now()-performance.now():performance.timeOrigin:0,W=0;W<x.length;)Q=(_=x[W++]).id,K=u?$[Q]:1,C=_.url||_.pendingUrl,G=m.Xn.get(Q),X=new F("tab",C,_.text,_.title,P,u?W:Q),Z=J&&_.windowId!==J?R.indexOf(_.windowId)+1+":":"",tt="",Z+=W,e===Q?(u||(X.r=i?1<<31:0),Z="("+Z+")"):G||(Z="**"+Z+"**"),!h&&_.incognito&&(tt+="*"),_.discarded&&(tt+="~"),_.audible&&(tt+=_.mutedInfo.muted?"\u266a":"\u266c"),X.visit=G?G.t+L:0,X.s=Q,X.label="#"+Z+(tt&&" "+tt),K>1&&(X.level=" level-"+K),s.push(X);if(s.sort(z.Xi),rt=T+y-(et=s.length),o||rt<0||!i)for(T>0&&!o?(s=s.slice(T,T+y),et=y,T=0):et>T+y&&(s.length=et=T+y),U=o?0:et;U<et;U++)s[U].r*=8/(U/4+1);else if(T>0){for(ot of it=s.slice(0,rt))ot.label+="[r]";for(et=(s=s.slice(T).concat(it)).length,U=0;U<et;U++)s[U].r=et-U;T=0}nt.Bi(),z.zr(s,4)}},Hi:function(t,n){return t-n},Gi:function(t,n){var e=m.Xn.get(n);return e?e.i:4&B?2047+n:-n},Ki:function(t,n){return 1/n}},W={pe:0,rr:r.b,Zi:function(t,n){var e,i,o,u,f,s,c,a,_,g;if(!(8&j))return z.zr([],8);if(o=(i=k).length>0?i[0]:"",0===i.length);else{if(true!==n&&"\\"===o[0]&&"\\"!==o[1])return o.length>1?i[0]=o.slice(1):i.shift(),o=M.slice(1).trimLeft(),$=!P||$||Z.Yi([o]),T?(T--,z.zr([],8)):(e=W.to(o),z.zr([e],8));u=l.me.searchEngineMap.get(o)}if(true===n){if(!u)return true}else{if(!u&&!o.startsWith("vimium://"))return 0===v&&i.length<=1&&(v=i.length?W.no():-1),z.zr([],8);u&&C&&(i.push(C),T=0,M+=" "+C,C="",O&=-5),i.length>1||(v=-1)}if(i.length>1&&u?(i.shift(),M.length>200&&(i=M.split(" ")).shift()):u&&(i=[]),$=!P||$&&Z.Yi([o]),u?(c=f=(a=r.Se(i,u.je,u.b,[])).je,s=a.ze):(c=f=i.join(" "),s=[]),"~"===o);else if(f.startsWith("vimium://")){if(_=r.J(f.slice(9),1,true),g=W.eo.bind(W,i,f,c,u,s),_ instanceof Promise)return _.then(W.ro.bind(W,t,g));if(_ instanceof Array)return W.ro(t,g,_);_&&(f=c=_,s=[])}else f=r.K(f,null,-2);return e=W.eo(i,f,c,u,s),z.zr([e],8)},ro:function(t,n,e){var i,o,u,l,f;if(!t.o){switch(e[1]){case 5:case 6:if(v=6===e[1]&&k.length>1?v:-1,!(o=e[0]))break;return C="",(k=((M="\\ "+o).length<201?M:r.j(M,0,200).trim()).split(" ")).length>1&&(k[1]=r.se(k[1],k.length>2)),W.Zi(t);case 2:if(k=(u=e[0]).length>1||1===u.length&&u[0]?u:k,(l=W.pe++)>12)break;if(f=W.Zi(t,true),l<=0&&(W.pe=0),true!==f)return f;break;case 0:e[0]&&(i=W.io(n(),e))}z.zr(i||[n()],8)}},eo:function(t,o,u,l,f){var s=new F("search",o,u,(l?l.Ee+": ":"")+t.join(" "),g,9);return t.length>0&&l?(s.t=W.oo(u,f),s.title=n(s.title,[l.Ee.length+2,s.title.length]),s.textSplit=e(s.t,f)):(s.t=r.W(i(u)),s.title=n(s.title,[]),s.textSplit=r.$(s.t)),p||(s.v=l&&l.b||W.xr(o)),s.p=l?l.Ee:"",s},io:function(t,e){var i=e[0],o=new F("math","vimium://copy "+i,i,i,g,9);return--o.r,o.title='<match style="text-decoration: none;">'+n(o.title,[])+"<match>",o.textSplit=r.$(e[2]),[t,o]},xr:function(t){for(var n=X.ti&&t.startsWith("http")?X.ni(t):-1,e=n<0?~n-1:n,r=e<0?[]:X.ri,i=t.indexOf(":")+3,o=0,u=0,l="",f="",s=0,c=0;o<=e&&(i="/"===t[i]?i+1:t.indexOf("/",i+1)+(u?0:1))>0;u=i){for(l=t.slice(u,i),c=e;o<=c;)if((f=r[s=o+c>>>1].u.slice(u))>l)c=s-1;else{if(f===l)return u?r[s].u:"";o=s+1}if(o<=e&&u&&"/"===(l=r[o].u)[i]&&l.length<=++i)return l}return""},uo:0,Cr:0,no:function(){var t=k[0],n=l.me.searchKeywords;return null==n?(W.Cr=W.Cr||setTimeout(W.lo,67),-2):t.length>=W.uo?0:n.includes("\n"+t)?-2:0},oo:function(t,n){var e,i,o,u=n.length;if(i=r.W(n.length>0?t.slice(0,n[0]):t),(e=r.Oe(i))&&(i=i.slice(e),e=0),n.length<=0)return i;for(o=n[0];n[e]=i.length,u>++e;)i+=r.W(t.slice(o,n[e])),o=n[e];return o<t.length&&(i+=r.W(t.slice(o))),i},to:function(t){var e=r.K(t,null,-2),o=4===r.V,u=new F("search",e,r.W(i(e)),"",g,9);return u.title=o?"~: "+n(t,[0,t.length]):n(t,[]),u.textSplit=r.$(u.t),p||(u.v=W.xr(e)),u.p=o?"~":"",u.n=1,u},lo:function(){var t,n,e,i=r.h(l.me.searchEngineMap).sort(),o=0,u="",f=[];for(t=i.length;0<=--t;)u.startsWith(n=i[t])||(o=(e=n.length)>o?e:o,u=n,f.push(n));l.lt("searchKeywords","\n"+f.join("\n")),W.uo=o,W.Cr=0}},z={fo:0,so:0,Ri:null,co:null,xi:null,rr:function(t){var n,e,r,i;if(z.co&&(z.co.o=true),n=z.co={o:false},z.so=0,e=1,r=-9&(j&=t[0])?t.length:2,z.Ri=[],z.fo=r-1,v=T&&-1,t[1]===W){if(i=W.Zi(n),r<3)return;if(i)return void i.then(z.ao.bind(null,t,n,e));e=2}z.ao(t,n,e)},ao:function(t,n,e){for(H.Pr=Date.now()-18144e5,H.Vi=3*k.length||.01,k.indexOf("__proto__")>=0&&(k=k.join(" ").replace(/(^| )__proto__(?=$| )/g," __proto_").trimLeft().split(" ")),Y.Or(),k.sort(z._o),G.go();e<t.length;e++)t[e].rr(n,e-1)},_o:function(t,n){return n.length-t.length||(t<n?-1:t===n?0:1)},Mi:function(t,n,e){var r,i=m.Tn;null===h&&(i=1!==i?i:f>=52||l.L.It||!!Y.Xn.Xn?m.Tn=0:1),1!==i?(Y.Xn.mo!==(r=((h=2!==i)?2:0)|(I?1:0))&&(Y.Xn={Xn:null,mo:r}),(e=e||Y.Xn.Xn)?t(n,e):chrome.tabs.query(I?{currentWindow:true}:{},t.bind(null,n))):chrome.windows.getCurrent({populate:I},function(e){m.Tn=h?0:2,n.o||z.Mi(t,n,I?e.tabs:null)})},zr:function(t,n){var e=z.Ri,r=t.length;if(r>0&&(z.so|=n,z.Ri=0===e.length?t:e.concat(t),8===n&&(S=!0,y-=r,w+=r)),0==--z.fo)return e=null,z.do()},do:function(){var n,e,r,o,u,l,f,s,c,a,_,g,m=z.Ri;return z.Ri=null,m.sort(z.Xi),T>0?(m=m.slice(T,T+b),T=0):m.length>b&&(m.length=b),G.vo=G.Ii=null,k.length>0&&(e=i(n=k[0]),((r=n.length!==e.length)||n.endsWith("/")&&n.length>1&&!n.endsWith("//"))&&(k[0]=r?e:n.slice(0,-1),G.ho())),m.forEach(t),o=m.length>0,u=S&&o,l=w,f=":"===x,c=R,a=O,_=2!=(s=v<0?-2!==v||o||f?0:3:$?k.length<=0||D?0:o?2:f?0:1:0)||f?0:z.so,g=z.xi,z.So(),g(m,u,s,_,l,c,a)},So:function(){z.co=z.xi=h=null,k=[],x=R=M=C=E=N="",G.Dr=null,H.Vi=3,H.Pr=v=z.so=B=y=b=w=U=0,j=0,O=0,S=p=false,D=I=false,$=true},po:function(){var t,n,e=M;if(T=0,C="",!(0===e.length||(t=(e=e.slice(-5)).lastIndexOf("+"))<0||0!==t&&32!==e.charCodeAt(t-1))){if(e=e.slice(t),t=M.length-e.length,(n=parseInt(e,10))>=0&&"+"+n===e&&n<=(t>0?100:200))T=n;else if("+"!==e)return;M=M.slice(0,t&&t-1),C=e,O|=4}},Xi:function(t,n){return n.r-t.r}},Q={__proto__:null,bookm:[1,V],domain:[16,L],history:[2,A],omni:[63,W,L,A,V,q],search:[8,W],tab:[4,q]},H={Xr:function(t,n){var e,r,i=G.Dr;for(e=0,r=k.length;e<r;e++)if(!(i[e].test(t)||i[e].test(n)))return false;return true},Vi:3,Bo:[0,0],Uo:function(t,n){var e,r=0;return(e=n.split(G.Dr[t]).length)<1?H.Bo:(r=1,G.Ii[t].test(n)&&(r+=1,G.vo[t].test(n)&&(r+=1)),[r,(e-1)*k[t].length])},Er:function(t,n){var e,r,i,o=0,u=0,l=0,f=0,s=!!n;for(G.Ii||G.Ei(),e=0,r=k.length;e<r;e++)f+=(i=H.Uo(e,t))[0],l+=i[1],s&&(u+=(i=H.Uo(e,n))[0],o+=i[1]);return f=f/H.Vi*H.yo(l,t.length),0===o?n?f/2:f:f<(u=u/H.Vi*H.yo(o,n.length))?u:(f+u)/2},Pr:0,yo:function(t,n){return t<n?t/n:n/t}},K=/[$()*+.?\[\\\]\^{|}]/g,G={Dr:null,Ii:null,vo:null,go:function(){var t,n=G.Dr=[];for(t of(G.Ii=G.vo=null,k))n.push(new RegExp(t.replace(K,"\\$&"),t!==t.toUpperCase()&&t.toLowerCase()===t?"i":""))},Ei:function(){var t,n,e,r=G.Ii=[],i=G.vo=[];for(t of G.Dr)n="\\b"+t.source,e=t.flags,r.push(new RegExp(n,e)),i.push(new RegExp(n+"\\b",e))},ho:function(){G.Dr&&(G.Dr[0]=new RegExp(k[0].replace(K,"\\$&"),G.Dr[0].flags))}},X={bo:0,yi:0,bi:0,ti:false,Ti:0,ri:null,wo:null,M:null,ki:function(t){X.wo?t&&X.wo.push(t):(X.wo=t?[t]:[],X.bo=Date.now(),X.Ti||chrome.history.search({text:"",maxResults:2e4,startTime:0},function(t){setTimeout(X.To,0,t)}))},To:function(t){var n,e,r,i,o;for(X.To=null,n=0,e=t.length;n<e;n++)(i=(r=t[n]).url).length>2e3&&(i=X.ji(i,r)),t[n]={t:i,Zr:r.title,ei:r.lastVisitTime,Yr:1,u:i};if(P)for(o of t)0===Z.gi(o.t,o.Zr)&&(o.Yr=0);setTimeout(function(){setTimeout(function(){var t,n,e,r,i,o,u,l,f=X.ri;for(t=f.length-1;0<t;)for(i=(r=(n=f[t]).t=nt.pi(e=n.u,n)).length>=e.length;0<=--t&&!((u=(o=f[t]).u).length>=e.length)&&e.startsWith(u);)o.u=e.slice(0,u.length),l=i?u:nt.pi(u,o),o.t=i||l.length<u.length?r.slice(0,l.length):l;X.M||setTimeout(function(){L.Qr&&L.Qr(X.ri)},200)},100),X.ri.sort(function(t,n){return t.u>n.u?1:-1}),X.ti=true,chrome.history.onVisitRemoved.addListener(X.ko),chrome.history.onVisited.addListener(X.xo)},100),X.ri=t,X.ki=function(t){t&&t(X.ri)},X.wo&&X.wo.length>0&&setTimeout(function(t){for(var n of t)n(X.ri)},1,X.wo),X.wo=null},xo:function(t){var n,e,r,i,o,u,l,f,s,c=t.url;if(c.length>2e3&&(c=X.ji(c,t)),n=t.lastVisitTime,e=t.title,r=++X.yi,i=X.M,(o=X.ni(c))<0&&X.bi++,(r>59||r>10&&Date.now()-X.bo>3e5)&&X.wi(),u=o>=0?X.ri[o]:{t:"",Zr:e,ei:n,Yr:P?Z.gi(c,e):1,u:c},i&&(f=L.Wi(c))&&((l=i.get(f.Qi))?(l.ei=n,o<0&&(l.Ai+=u.Yr),f.zi>=7&&(l.ae=8===f.zi?1:0)):i.set(f.Qi,{ei:n,Ai:u.Yr,ae:8===f.zi?1:0})),o>=0)return u.ei=n,void(e&&e!==u.Zr&&(u.Zr=e,Y.Cr&&Y.ur(1),P&&(s=Z.gi(c,e),u.Yr!==s&&(u.Yr=s,l&&(l.Ai+=s||-1)))));u.t=nt.pi(c,u),X.ri.splice(~o,0,u),Y.Cr&&Y.ur(1)},ko:function(t){var n,e,i,o,u,l,f,s,c;if(nt.Ro.length=0,n=nt.Si,Y.ur(1),t.allHistory){for(i of(X.ri=[],X.M&&(X.M=r.M=new Map),e=new Map,V.$r))n.delete(i.u);nt.Si=e}else for(s of(o=X.ni,u=X.ri,l=X.M,t.urls))(i=o(s))>=0&&(l&&u[i].Yr&&(c=L.Wi(s))&&(f=l.get(c.Qi))&&--f.Ai<=0&&l.delete(c.Qi),u.splice(i,1),n.delete(s))},ji:function(t,n){var e=t.lastIndexOf(":",9),i=e>0&&"://"===t.substr(e,3),o=n.title;return t=t.slice(0,(i?t.indexOf("/",e+4):e)+320)+"\u2026",o&&o.length>160&&(n.title=r.j(o,0,160)),t},wi:function(){var t=Date.now();if(X.bi<=0);else{if(t<X.bo+1e3&&t>=X.bo)return;setTimeout(chrome.history.search,50,{text:"",maxResults:Math.min(999,X.yi+10),startTime:t<X.bo?t-3e5:X.bo},X.Mo)}return X.bo=t,X.bi=X.yi=0,nt.Bi()},Mo:function(t){var n,e,r,i,o=X.ri,u=X.ni;if(!(o.length<=0))for(n of t){if((e=n.url).length>2e3&&(n.url=e=X.ji(e,n)),(r=u(e))<0)X.bi--;else if(!(i=n.title)||i===o[r].Zr)continue;X.yi--,X.xo(n)}},ni:function(t){for(var n="",e=X.ri,r=e.length-1,i=0,o=0;i<=r;)if((n=e[o=i+r>>>1].u)>t)r=o-1;else{if(n===t)return o;i=o+1}return~i}},Z={gi:function(t,n){for(var e of P)if(n.includes(e)||t.includes(e))return 0;return 1},Yi:function(t){var n,e;if(P)for(n of t)for(e of P)if(e=e.trim(),n.includes(e)||e.length>9&&n.length+2>=e.length&&e.includes(n))return true;return false},Co:function(){var t,n,e,r,i;if(V.$r)for(t of V.$r)t.Yr=P?Z.gi(t.t,t.Vr):1;if(X.ri)for(t of(n=X.M,X.ri))e=P?Z.gi(t.t,t.Zr):1,t.Yr!==e&&(t.Yr=e,n&&(r=L.Wi(t.u))&&(i=n.get(r.Qi))&&(i.Ai+=e||-1))},Oo:function(t){var n,e=[];for(n of t.split("\n"))n.trim()&&"#"!==n[0]&&e.push(n);P=e.length>0?e:null,(X.ri||V.$r)&&setTimeout(Z.Co,100)}},Y={Gr:null,Kr:null,Xn:{Xn:null,mo:0},Do:[],Cr:0,Io:0,Or:function(){var t,n,e,r,i,o=k,u=null,f=0,s=o.join(" ");for(t=Y.Do,n=s?t.length:0;0<=--n;)if(t[n].Eo||!$){for(e=t[n].nr,r=0,i=0;r<e.length&&i<o.length;i++)o[i].includes(e[r])&&r++;if(r>=e.length){u=t[n];break}}Y.Gr=u,u&&(l.at.t<200||!u.ri||u.ri.length>1e3)&&(f=J.now())-u.ei<Math.max(300,1.3*l.at.t)?(Y.Kr=u,u.nr=o.slice(0)):!s||u&&s===u.nr.join(" ")||!(s.length>4||/\w\S|[^\x00-\x80]/.test(s))?Y.Kr=null:(Y.Kr={nr:o.slice(0),Eo:$,ei:f||J.now(),ri:u&&u.ri,$r:u&&u.$r},Y.Do.push(Y.Kr),Y.Cr||(Y.Cr=setInterval(Y.No,6e3)))},No:function(){for(var t=Y.Do,n=-1,e=J.now()-5983;++n<t.length&&t[n].ei<e;);++n<t.length?t.splice(0,n):(t.length=0,clearInterval(Y.Cr),Y.Cr=0)},ur:function(t){for(var n of Y.Do)t<2?n.ri=null:t<3?n.$r=null:Y.Xn.Xn=null},Ni:function(t){Y.Xn.Xn!==t&&(Y.Io&&(clearTimeout(Y.Io),Y.Io=0),Y.Xn.Xn=t,t&&(Y.Io=setTimeout(Y.Ni,3e3,null)))}},tt=decodeURIComponent,nt={pi:function(t,n){if(t.length>=400||t.lastIndexOf("%")<0)return t;try{return tt(t)}catch(t){}return nt.Si.get(t)||(n&&nt.Ro.push(n),t)},ai:function(t){for(var n,e,r=nt.Si,i=nt.Ro,o=-1,u=t.length;;)try{for(;++o<u;)(n=t[o]).t=(e=n.u).length>=400||e.lastIndexOf("%")<0?e:tt(e);break}catch(t){n.t=r.get(e)||(i.push(n),e)}nt.Bi()},Si:new Map,Ro:[],jo:-1,Bi:function(){0!==nt.Ro.length&&-1===nt.jo&&(nt.jo=0,setTimeout(nt.Po,17,null))},Po:function(t){for(var n,e,r,i,o,u,l;nt.jo<nt.Ro.length;nt.jo++){if(!(n=nt.Si.get(i=(r="string"==typeof(e=nt.Ro[nt.jo]))?e:e.u)))return t||(t=nt.$o())?(l=(u=(o=f>=66?i.split("#",3):[]).length)<2?i:u<3?o[0]+"%23"+o[1]:i.replace(/#/g,"%23"),t.open("GET",nt.Fo+l,true),t.send()):(nt.Ro.length=0,void(nt.jo=-1));r||(e.t=n)}},Jo:function(){if(!(nt.jo<0)){var t=this.responseText,n=nt.Ro[nt.jo++];"string"!=typeof n?nt.Si.set(n.u,n.t=t):nt.Si.set(n,t),nt.jo<nt.Ro.length?nt.Po(this):(nt.Ro.length=0,nt.jo=-1)}},hi:true,Fo:"1",$o:function(){if(!nt.Fo)return null;var t=new XMLHttpRequest;return t.responseType="text",t.onload=nt.Jo,t},Vo:function(t){var n=!!t&&!(t=t.toLowerCase()).startsWith("utf"),e=n?"data:text/plain;charset="+t+",":"",i=nt.Fo;e!==i&&(nt.Fo=e,n?"1"!==i&&setTimeout(function(){return X.ri&&nt.ai(X.ri),nt.ai(V.$r)},100):(nt.Si.clear(),nt.Ro.length=0),nt.hi!==n&&(nt.Ro=n?[]:{length:0,push:r.b},nt.hi=n,nt.jo=-1))}};d={rr:function(t,n,e){var i,o,u,f,s,c;S=false,(t=t.trim())&&2===l.Pe.o&&(/^[a-z]:\\|^\\\\[\w$.-]+(\\|$)|^\\\\$/i.test(t)?t=(":"===t[1]?"":"//")+t.slice(":"===t[1]?0:2).replace(/\\+/g,"/").toLowerCase():"file:"===t.slice(0,5).toLowerCase()&&(t=t.toLowerCase())),x=M=t&&t.replace(r.O," "),R="",O=0,z.po(),k=(t=M)?(t=t.length<201?t:r.j(t,0,200).trimRight()).split(" "):[],(U=0|n.c||128)&&(U-=t.replace(/[\u2e80-\u2eff\u2f00-\u2fdf\u3000-\u303f\u31c0-\u31ef\u3200-\u9fbf\uf900-\ufaff\ufe30-\ufe4f\uff00-\uffef]/g,"aa").length-t.length),U=Math.max(50,Math.min(U,320)),p=!!(1&(B=n.f)),b=y=Math.min(Math.max(3,0|n.r||10),25),w=0,z.xi=e,i="bomni"===n.o?(B|=64,Q.omni):Q[n.o],u=n.t||63,f=n.e||63,i===Q.tab&&(I=!!(2&B)),S=1===i.length,2===(o=k.length>=1?k[0]:"").length&&":"===o[0]&&(s="b"===(o=o[1])?Q.bookm:"h"===o?Q.history:"t"===o||"w"===o||"W"===o?(I="t"!==o,B|=0,Q.tab):"B"===o?(B|=64,Q.omni):"H"===o?(B|=256,Q.omni):"d"===o?Q.domain:"s"===o?Q.search:"o"===o?Q.omni:null)&&(S=2===(i=s).length,R=k.shift(),O|=1,M=M.slice(3),f=i[0]),k.length>0&&((o=k[0]).includes("\u3002")||o.includes("\uff1a"))&&(D=k.length<2,(c=r.se(o,D))!==o?(k[0]=c,M=c+M.slice(o.length),D=D&&!/^[.\u3002]\w+([.\u3002]\w*)?$/.test(o)):D=D&&o.includes("\uff1a")&&!/\uff1a([^\/\d]|\d[^\0-\xff])/.test(o)),$=!P||Z.Yi(k),j=u&f,M&&(O|=2),z.rr(i)},ar:function(t,n,e){switch(n){case"tab":chrome.tabs.remove(+t,function(){var t=r.x();return t||Y.Ni(null),e(!t),t});break;case"history":var i=!X.ti||X.ni(t)>=0;chrome.history.deleteUrl({url:t}),i&&Y.ur(1),e(i)}},Rr:function(){Y.Xn.Xn&&(1&Y.Xn.mo||!(2&Y.Xn.mo)!=(2===m.Tn))&&Y.Ni(null)},Ao:Z.Yi},l.ft.omniBlockList=Z.Oo,l.gt("omniBlockList"),l.ft.localeEncoding=nt.Vo,l.gt("localeEncoding"),r.De(80,function(){l.gt("searchEngines",null)})});var d={rr:function(t,n,e){r.De(210,function(){return d.rr(t,n,e)})},ar:r.b,Rr:r.b};r.De(1e3,function(){var t,n,e,i,o,u,f,s,c,a,_,g,m,d=r.T({findModeRawQueryList:1,innerCSS:1,keyboard:1,newTabUrl_f:1,vomnibarPage_f:1}),v=null,h="",S=null,p=null,B=null,U=function(){return t||(t=chrome.storage&&chrome.storage.sync)},y=function(t){b(t,"sync")},b=function(t,n){var e,i,o,u;if("sync"===n){if(e=function(t){var n,e,i,o;if(S){for(n in r.T(t),S)!(i=(e=n.split(":")[0])===n)&&e in S||T(e,null!=(o=i?S[n]:null)?o.newValue:t[e],t);S=null}},r.T(t),i=l.qt&&l.qt())return S&&r.i(t,S),S=t,void i.then(function(){return b({},n)});for(o in S&&(r.i(t,S),S=null),t){if(u=t[o],8===(o.includes(":")?8:T(o,null!=u?u.newValue:null)))return S=t,void U().get(e);delete t[o]}}},w=function(){var t,n=[];for(t=0;t<arguments.length;t++)n[t]=arguments[t];console.log.apply(console,[(new Date).toLocaleString()].concat.call([].slice.call(arguments,0)))},T=function(t,n,e){var r,i,o,u,s,c;if(t in l.ct&&!(t in l.ut)&&a(t)){if(r=l.ct[t],i=n&&"object"==typeof n&&n.$_serialize||""){if("split"===i&&!e)return 8;if(8===(n=f(t,n,e)))return}null!=n?(o=B?r:l.it(t),(c="object"!=typeof r)?(s=n,u=o):(s=JSON.stringify(n),u=JSON.stringify(o)),s!==u&&(s===(o=c?r:JSON.stringify(r))&&(n=r),B||w("sync.this: update",t,"string"==typeof n?(n.length>32?n.slice(0,30)+"...":n).replace(/\n/g,"\\n"):n),k(t,n))):null!=localStorage.getItem(t)&&(B||w("sync.this: reset",t),k(t,r))}},k=function(t,n){h=t,l.lt(t,n),h="",t in l.ht&&l.dt({N:6,d:[l.ht[t]]})},x=function(t,n){a(t)&&t!==h&&(v||(setTimeout(c,800),v=r.C()),v[t]=n)};if(e=function(t,n){var e,i,o;U()?(i=chrome.storage.local,o=function(){var n=r.x();if(n)return w("storage.local: Failed to update",t,":",n.message||n),n},null==n?i.remove(t,o):i.set(((e={})[t]=n,e),o)):l.mt=r.b},i=function(t){return t.replace(/[<`\u2028\u2029]/g,function(t){return"<"===t?"`l":"`"===t?"`d":"\u2028"===t?"`r":"`n"})},o=function(t){return t.replace(/"|\\[\\"]/g,function(t){return'"'===t?"`q":'\\"'===t?"`Q":"`S"})},u=function(t){var n={Q:'\\"',S:"\\\\",d:"`",l:"<",n:"\u2029",q:'"',r:"\u2028"};return t.replace(/`[QSdlnqr]/g,function(t){return n[t[1]]})},f=function(t,n,e){var r,i,o,f,s="";switch(n.$_serialize){case"split":for(r=n.k,i=n.s,o=0;o<i;o++){if(!(f=e[t+":"+o])||"string"!=typeof f||!f.startsWith(r))return 8;s+=f.slice(r.length)}break;case"single":return JSON.parse(u(JSON.stringify(n.d)));default:return w("Error: can not support the data format in synced settings data:",t,":",n.$_serialize),null}return"string"==typeof l.ct[t]?s=u(s):(s=u(JSON.stringify(s)),JSON.parse(s.slice(1,-1)))},s=function(t,n,e){var r,u,f,s,c,a,_,g,m,d,v,h;if(n&&!("string"!=typeof n?"object"!=typeof n:n.length<8192/6-40)&&(u="",!((r=JSON.stringify(n)).length<8192/6-40))){if(4*(r=i(r)).length<8093)return r;if((u=e.encode(r)).length<8093)return r;for(f=0,s=Date.now().toString(36)+":",c={},r="string"==typeof l.ct[t]?r.slice(1,-1):o(r),p||(p=new TextDecoder),a=0,_=(u=e.encode(r)).length;a<_;){for(g=Math.min(a+8134,_),m=void 0,d=0;g<_&&128==(192&u[g]);g--);if((d=(r=(m=p.decode(u.subarray(a,g))).slice(-6)).lastIndexOf("\\"))>r.length-2)m+="b",d=1;else if(d>0&&"u"===r[d+1])for(v=d=r.length-d;v++<6;m+="b");else d=0;if(m=JSON.parse('"'+m+'"'),d&&((h=m.endsWith("b"))||(g-=d),m=m.slice(0,d>1&&h?d-6:-1)),c[t+":"+f++]=s+m,a=g,f>=13)break}return c[t]={$_serialize:"split",k:s,s:f},c}},c=function(){var t,n,e,i,o,u,f,c,a=v,_=[],g=[],m=[],d=r.C(),h={};if(v=null,a&&l.mt===x){for(n in t=new TextEncoder,a)for(i=a[e=n],u="string"==typeof(o=l.ct[e])||"object"==typeof o&&"vimSync"!==e?0:13,null!=i?(f=s(e,i,t))&&"object"==typeof f?(d[e]=f,u=f[e].s):(h[e]=f?{$_serialize:"single",d:JSON.parse(f)}:i,g.push(e)):(m.push(e),_.push(e));u<13;u++)m.push(e+":"+u);for(e in p=t=null,_.length>0&&w("sync.cloud: reset",_.join(", ")),m.length>0&&U().remove(m),g.length>0&&(w("sync.cloud: update",g.join(", ")),U().set(h)),c=function(t){U().set(d[t],function(){var n=r.x();return n?w("Failed to update",t,":",n.message||n):w("sync.cloud: update (serialized) "+t),n})},d)c(e)}},a=function(t){return!(t in d)},_=function(t){l.Ge.Je=null,r.De(t,function(){chrome.storage.local.get(function(t){var n,i,o,u,f,s,c,_,g;if(!l.it("vimSync")&&localStorage.length){for(w("storage.local: backup all settings from localStorage"),r.T(t),n=0,i=localStorage.length;n<i;n++)(o=localStorage.key(n))in l.ct&&(a(o)||"keyboard"===o)&&(u=l.ct[o],f=t[o],c=s=l.it(o),_=f,"object"==typeof u&&(_=JSON.stringify(f),c=JSON.stringify(s)),c!==_&&e(o,s),delete t[o]);(g=Object.keys(t)).length>0&&chrome.storage.local.remove(g)}})})},g=function(t,i,o){var u,f,s,c,_,g,m,d,v,S;if(2&i&&chrome.storage.local.get(function(t){var n,e,u,f,s=r.x();if(s)return l.qt=null,(i-=2)||o(),s;for(u in r.T(t),e=void 0!==(n=t.vimSync)||Object.keys(t).length>0,delete t.vimSync,e&&w("storage.local: restore settings to localStorage"),t)u in l.ct&&(h=u,f=null==(f=t[u])?l.ct[u]:f,l.lt(u,f));h="",null!=n&&l.lt("vimSync",n),r.De(100,function(){l.dt({N:6,d:l.Pe})}),(i-=2)||o()}),2!==i){if(r.T(t),!(u=t.vimSync||l.it("vimSync")))return n=u,l.mt=e,void(--i||o());for(s in t.vimSync||(w("sync.cloud: enable vimSync"),t.vimSync=u,U().set({vimSync:u})),f=[],t)s in l.$t&&f.push(s);for(s of(c=[],_={},f))for(g=l.$t[s],m=-1,d=void 0;m<13&&(d=m<0?s:s+":"+m)in t;m++)_[v=m<0?g:g+":"+m]=t[v]=t[d],delete t[d],c.push(d);for(f.length>0&&(chrome.storage.onChanged.removeListener(b),l.mt=r.b,U().remove(c),U().set(_,r.x),f.length=0),m=0,S=localStorage.length;m<S;m++)!((s=localStorage.key(m))in t)&&s in l.ct&&a(s)&&f.push(s);for(s of f)T(s,null);for(s in t)s.includes(":")||T(s,t[s],t);l.gt("vimSync"),r.De(4,function(){--i||o()}),B&&w("sync.cloud: download settings to localStorage")}},l.ft.vimSync=function(t){var r,i,o;if(n=t,U()){if(i=(r=U().onChanged)||chrome.storage.onChanged,o=r?y:b,!t)return i.removeListener(o),void(l.mt!==e&&(l.mt=e,_(600)));l.mt!==x&&(i.addListener(o),l.mt=x,chrome.storage.local.clear())}},l.qt=function(){if(B);else{if(localStorage.length)return null;B=new Promise(function(t){n?U().get(function(n){var e=r.x();return e?(l.qt=null,t()):g(n,1,t),e}):g({},2,t)}).then(function(){B=null})}return B},false===(n=l.it("vimSync"))||!n&&!l.Ge.Ke)return m=l.Ge.Je,l.Ge.Je=m?null:_,m&&_(6e3),void(l.mt=e);U()?U().get(function(t){var n=r.x();if(n)return w("Error: failed to get storage:",n,"\n\tSo disable syncing temporarily."),l.ft.vimSync=l.mt=r.b,l.qt=null,n;B=Promise.resolve(),B=new Promise(function(n){return g(t,3,n)}).then(function(){B=null})}):l.qt=null}),r.De(150,function(){var t,e,i,o,u=chrome.browserAction;u&&(i=l.ft.showActionIcon,o=function(n){var i=l.Pt[n];fetch(i).then(function(t){return t.arrayBuffer()}).then(function(i){var o,u,l,f=new Uint8ClampedArray(i),s=i.byteLength/5,c=0|Math.sqrt(s/4),_=c+c,g=r.C();for(g[c]=new ImageData(f.subarray(0,s),c,c),g[_]=new ImageData(f.subarray(s),_,_),t[n]=g,o=e.get(n),e.delete(n),u=0,l=o.length;u<l;u++)a._n(o[u],n,true)})},l.Ge.Ze=function(n){if(null==n)return!!t;n?t||(t=[null,null,null],e=new Map,a.wt().forEach(function(t){var n=t.bn.s;0!==n.dn&&a._n(n.un,n.dn)})):t&&setTimeout(function(){l.it("showActionIcon")||(t=null,e=null)},200)},a._n=function(n,i,l){var f,s,c;n<0||((f=t[i])?(s=u.setIcon,c={tabId:n,imageData:f},l?s(c,r.x):s(c)):e.has(i)?e.get(i).push(n):(setTimeout(o,0,i),e.set(i,[n])))},l.ft.showActionIcon=function(t){i(t),l.Ge.Ze(t);var e=n("name");t||(e+="\n\n"+n("noActiveState")),u.setTitle({title:e})},l.gt("showActionIcon"))}),r.De(600,function(){function t(){S&&(S.Lo=null),B=y=S=v=null,b&&clearTimeout(b),p&&clearTimeout(p),w=k=x=b=p=0,h="",r.y()}function e(){var n=Date.now()-w;if(n>5e3||n<-5e3)return t();b=setTimeout(e,3e4)}function i(){var t,n;if(p=0,(t=S)&&!t.qo)return S=null,t.Lo?((n=Date.now())<w&&(w=n-1e3),u(t.Rn,t.Lo)):void 0}function o(t,e,i,o,u){var f,s,a,_,d,p,U,b,w,R,M,C,O,D,I,E,N,j;if(t.Lo){for(S=null,s=(f=e.length>0)?e[0]:null,_={},k=o,x=u,f&&(g||null!=e[0].s)&&(B=new Map),y=[],d=new Set,p=(" "+l.at.s+" ").includes(" type-letter "),U=0,b=i?0:1,w=e.length;U<w;U++)M=(R=e[U]).title,C=R.u,O=R.e,D="",I=null!=R.s,E=g&&!(i&&0===U)&&("tab"===O?R.s!==m.Pn:"history"===O&&!I),d.has(C)?C=":"+(U+b)+" "+C:d.add(C),C=r.encodeAsciiURI(C,1).replace(/%20/g," "),C=r.Re(C),E&&(_.mo=O,D=" ~"+(U+b)+"~"),N={content:C,description:D=(M||p?(M?M+" <dim>":"<dim>")+(p?"["+R.e[0].toUpperCase()+"] ":"")+(M?"-</dim> <url>":"</dim><url>"):"<url>")+R.textSplit+"</url>"+(D&&"<dim>"+D+"</dim>")},E&&(N.deletable=true),I&&(_.$i=R.s),(E||I)&&(B.set(C,_),_={}),y.push(N);if(v=t.Rn,i)if("search"===s.e){if(a=((j=s.p)&&"<dim>"+(r.$(j)+c)+"</dim>")+"<url>"+s.textSplit+"</url>",T=2,s=e[1])switch(s.e){case"math":y[1].description=s.textSplit+" = <url><match>"+s.t+"</match></url>"}}else T=3,a=y[0].description;else 1!==T&&(a="<dim>"+n("OpenC")+"</dim><url>%s</url>",T=1);i&&(h=e[0].u,y.shift()),a&&chrome.omnibox.setDefaultSuggestion({description:a}),t.Lo(y),r.y()}else S===t&&(S=null)}function u(t,n){var u,f,s,c;t=t.trim().replace(r.O," "),S&&(S.Lo=(u=t===S.Rn)?n:null,u)||(t!==v?1===k&&t.startsWith(v)?n([]):(S={Lo:n,Rn:t,qo:false},p||(f=Date.now(),(s=l.at.t+w-f)>30&&s<3e3?p=setTimeout(i,s):(S.qo=true,b||(b=setTimeout(e,3e4)),w=f,B=y=null,h="",c=k<2||!t.startsWith(v)?0:3===k?t.includes(" ")?0:8:x,d.rr(t,{o:"omni",t:c,r:R,c:U,f:1},o.bind(null,S))))):y&&n(y))}function s(t,n,e){return t?":"===t[0]&&/^:([1-9]|1[0-2]) /.test(t)&&(t=t.slice(" "===t[2]?3:4)):t=r.K(""),"file://"===t.slice(0,7).toLowerCase()&&(t=r.qe(t)),null!=e?a.hn[5]({s:e}):a.hn[6]({u:t,r:"currentTab"===n?0:"newForegroundTab"===n?-1:-2},null)}var c,_,g,v,h,S,p,B,U,y,b,w,T,k,x,R,M=chrome.omnibox;M&&(c=n("colon")+n("NS"),g=!!(_=M.onDeleteSuggestion)&&"function"==typeof _.addListener,v=null,h="",S=null,p=0,B=null,U=128,y=null,b=0,T=0,k=0,x=0,R=f<60?6:12,M.onInputStarted.addListener(function(){if(chrome.windows.getCurrent(function(t){var n=t&&t.width;U=n?Math.floor((n-160/devicePixelRatio)/7.72):128}),b)return t()}),M.onInputChanged.addListener(u),M.onInputEntered.addListener(function n(e,o){var u,l=S;if(l&&l.Lo){if(l.Lo=n.bind(null,e,o),l.qo)return;return p&&clearTimeout(p),i()}return e=e.trim().replace(r.O," "),null===v&&e?d.rr(e,{o:"omni",t:0,r:3,c:U,f:1},function(t,n){return n?s(t[0].u,o,t[0].s):s(e,o)}):(h&&e===v&&(e=h),u=B&&B.get(e)&&B.get(e).$i,t(),s(e,o,u))}),g&&_.addListener(function(t){var n=parseInt(t.slice(t.lastIndexOf("~",t.length-2)+1))-1,e=y&&y[n].content,r=e&&B&&B.get(e)||null,i=r&&r.mo;i?(":"===e[0]&&(e=e.slice(e.indexOf(" ")+1)),a.hn[21]({t:i,u:"tab"===i?r.$i:e},null)):console.log("Error: want to delete a suggestion but no related info found (may spend too long before deleting).")}))}),r.De(100,function(){var t=0,n=o?"edge:":"chrome:",e=n+"//newtab/",i=function(i,o,u){var f,s,c,a;if(u.url.startsWith(n)&&t&(u.url===e?2:1)&&"loading"===o.status)for(f=l.L.Ct,s=location.origin.length,c=0,a=f.length-1;c<a;++c)chrome.tabs.executeScript(i,{file:f[c].slice(s)},r.x)},u=function(){chrome.permissions.contains({origins:["chrome://*/*"]},function(n){var e,l=r.x();if(l)return l;e=function(e){chrome.permissions.onAdded[n&&false!==e?"removeListener":"addListener"](u),t=(n?1:0)+(e?2:0),chrome.permissions.onRemoved[t?"addListener":"removeListener"](u),chrome.tabs.onUpdated[t?"addListener":"removeListener"](i)},f>84&&!o?chrome.permissions.contains({origins:["chrome://new-tab-page/"]},e):e(null)})};u()}),chrome.runtime.onInstalled.addListener(l.Ge.Ye=function(t){var e=t.reason;if("install"===e)e="";else{if("update"!==e)return;e=t.previousVersion}l.Ge.Ye&&(chrome.runtime.onInstalled.removeListener(l.Ge.Ye),l.Ge.Ye=null,r.De(500,function(){var i,o;chrome.tabs.query({status:"complete"},function(t){var n,e,i,o,u=chrome.tabs,f=r.x,s=/^(file|ftps?|https?):/,c=location.origin.length,a=l.L.Ct;for(n=t.length,e=a.length-1;0<=--n;)if(s.test(t[n].url))for(i=t[n].id,o=0;o<e;++o)u.executeScript(i,{file:a[o].slice(c),allFrames:true},f)}),console.log("%cVimium C%c has been %cinstalled%c with %o at %c%s%c.","color:red","color:auto","color:#0c85e9","color:auto",t,"color:#0c85e9",new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toJSON().slice(0,-5).replace("T"," "),"color:auto"),l.L.It&&console.log("Sorry, but some commands of Vimium C require the permission to run in incognito mode."),e?parseFloat(l.L.St)<=parseFloat(e)||((i=l.Ge).Je?i.Je(6e3):i.Je=true,l.it("notifyUpdate")&&(e="vimium_c-upgrade-notification",o={type:"basic",iconUrl:location.origin+"/icons/icon128.png",title:"Vimium C "+n("Upgrade"),message:n("upgradeMsg",[l.L.Tt])+n("upgradeMsg2")+"\n\n"+n("clickForMore")},f<67&&(o.isClickable=true),f>=70&&(o.silent=true),chrome.notifications&&chrome.notifications.create(e,o,function(t){var n;if(n=r.x())return n;e=t||e,chrome.notifications.onClicked.addListener(function(t){t===e&&(chrome.notifications.clear(e),a.hn[19]({u:r.K("vimium://release")}))})}))):(l.qt&&l.qt()||Promise.resolve()).then(function(){return a.Yt?new Promise(function(t){return setTimeout(t,200)}):0}).then(function(){a.hn[19]({u:l.L.Ht+"#commands"})})}))}),r.De(1200,function(){l.Ge.Ye&&chrome.runtime.onInstalled.removeListener(l.Ge.Ye),l.Ge.Ye=null,document.documentElement.innerHTML="",r.y()});