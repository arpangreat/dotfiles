__filename="pages/options_defs.js",define(["exports","./async_bg","./options_base"],function(t,i,n){"use strict";var s,r,u,e,h,o,f,c,a,l,d,v,p,g;n.Zs.Do=Object.create(null),n.Zs.cs=[],n.Zs.prototype.ks=function(t){t.call(this),window.VApi&&i.Js.pt(i.Js.ht[this.Ss],this._s(),VApi.z)},n.Zs.Ys=function(){var t,s,r=n.Zs.Do,u=[];for(t in r)!(s=r[t]).bs&&s.Cs()&&u.push(s.Ss);if(u.length>0&&!confirm(i.ls("dirtyOptions",[u.join("\n  * ")])))return false;for(t in r)if(!(s=r[t]).bs&&!s.js())return false;for(t in r.vimSync.bs||r.vimSync.As(),r.exclusionRules.bs||r.exclusionRules.As(),r)r[t].bs||r[t].As();return true},n.Zs.tu=function(){var t,i=n.Zs.Do;for(t in i)if(!i[t].bs)return true;return false},n.Zs.prototype.u=function(t,i){return t===i},s=(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.Ur=function(){var t,s;this.$s={min:(t=this.An.min)&&!isNaN(s=parseFloat(t))?s:null,max:(t=this.An.max)&&!isNaN(s=parseFloat(t))?s:null,default:i.Js.ct[this.Ss],Ks:n.iu},this.An.oninput=this.ns,this.An.onfocus=this.nu.bind(this)},n.prototype.as=function(t){this.An.value=""+t},n.prototype._s=function(){return parseFloat(this.An.value)},n.prototype.nu=function(){var t=this,i=this.An,n=function(i){return t.su(i)},s=function(){i.removeEventListener("wheel",n,{passive:false}),i.removeEventListener("blur",s),t.ru=0};this.ru=0,i.addEventListener("wheel",n,{passive:false}),i.addEventListener("blur",s)},n.prototype.su=function(t){var i,n,s,r,u,e,h,o;if(t.preventDefault(),i=this.ru,!((n=Date.now())-i<100&&n+99>i&&i))return this.ru=n,u=(s=this.An).value,"function"==typeof(h=(r=(t.deltaY||t.deltaX)>0)?s.stepUp:s.stepDown)?(h.call(s),e=s.value,s.value=u):(o=(h=parseFloat)(s.step)||1,n=(+s.value||0)+(r?o:-o),isNaN(o=h(s.max))||(n=Math.min(n,o)),isNaN(o=h(s.min))||(n=Math.max(n,o)),e=""+n),this.uu(e,i>0,false)},n.iu=function(t){return isNaN(t)&&(t=this.default),t=null!=this.min?Math.max(this.min,t):t,null!=this.max?Math.min(this.max,t):t},n})(n.Zs),r=(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.Ur=function(){var t=this.An,n=t.dataset.map;this.eu=n?JSON.parse(n):t.dataset.allowNull?i.hu:i.ou,this.fu=this.eu.length-1,this.fu>1&&"vimSync"!==this.Ss&&t.addEventListener("change",this.onTripleStatusesClicked.bind(this),true),t.onchange=this.ns},i.prototype.as=function(t){var i=true===t||t===this.eu[this.fu];this.An.checked=i,this.An.indeterminate=this.fu>1&&t===this.eu[1],this.cu=i?this.fu:Math.max(0,this.eu.indexOf(t))},i.prototype._s=function(){return this.An.indeterminate?this.eu[1]:this.eu[this.An.checked?this.fu:0]},i.prototype.onTripleStatusesClicked=function(t){t.preventDefault();var i=this.cu;this.cu=2===i?1:i?0:2,this.An.indeterminate=2===i,this.An.checked=2===this.cu},i.ou=[false,true],i.hu=[false,null,true],i})(n.Zs),u=(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.Ur=function(){var t=this.An.dataset.converter||"",n=t?t.split(" "):[];this.An.oninput=this.ns,n.length>0&&(this.$s={au:n,dn:0,Ks:i.lu})},i.prototype.ws=function(){t.prototype.ws.call(this);var i=this.$s;i&&(i.dn=0,i.dn=i.Ks(this.Os)===this.Os?1:0)},i.prototype.as=function(t,i){var n=t.replace(/ /g,"\xa0");true!==i?this.An.value=n:this.uu(n,true,true)},i.prototype.du=function(){return this.An.value.trim().replace(/\xa0/g," ")},i.prototype._s=function(){var t=this.du(),n=this.$s;return t&&n&&n.Ks===i.lu&&(n.dn|=2,t=n.Ks(t),n.dn&=-3),t},i.prototype.Ts=function(t){return t!==this.du()},i.prototype.Xs=function(t,i,s){var r=this.An,u=this.An,e=u.classList,h=u.parentElement,o=r.nextElementSibling;o=o&&o.classList.contains("tip")?o:null,null!=s||(s=!!t),(s||o)&&n.qs(function(){s?(null==o&&((o=document.createElement("div")).className="tip",h.insertBefore(o,r.nextElementSibling)),o.textContent=t,null!==i&&e.add(i||"has-error")):(e.remove("has-error"),e.remove("highlight"),o&&o.remove())})},i.lu=function(t){var i,n,s=this.au;if(s.indexOf("lower")>=0?t=t.toUpperCase().toLowerCase():s.indexOf("upper")>=0&&(t=t.toLowerCase().toUpperCase()),t=t.normalize(),s.indexOf("chars")<0||2&this.dn&&!(1&this.dn))return t;for(n of(i="",t.replace(/\s/g,"")))i.includes(n)||(i+=n);return i},i})(n.Zs),e=(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._s=function(){var n=t.prototype._s.call(this);return n||this.as(n=i.Js.ct[this.Ss],true),n},n})(u),h=(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.vu=function(t){var i=this.An instanceof HTMLInputElement,n=JSON.stringify(t,null,i?1:2);return i?n.replace(/(,?)\n\s*/g,function(t,i){return i?", ":""}):n},n.prototype.as=function(i,n){t.prototype.as.call(this,this.vu(i),n)},n.prototype.Ts=function(t){return this.vu(t)!==this.du()},n.prototype._s=function(){var n=t.prototype._s.call(this),s=null;if(n)try{s=JSON.parse(n)}catch(t){}else this.as(s=i.Js.ct[this.Ss],true);return s},n})(u),o=(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.Ur=function(){this.pu=true,this.gu=this._u.bind(this),this.An.addEventListener("focus",this.gu)},n.prototype._u=function(){this.gu&&(this.An.removeEventListener("focus",this.gu),this.An.classList.remove("masked"),this.gu=null,this.pu=false,this.An.removeAttribute("placeholder"),this.ws())},n.prototype.as=function(n,s){this.pu?this.An.placeholder=i.ls("clickToUnmask"):t.prototype.as.call(this,n,s)},n.prototype._s=function(){return this.pu?this.Os:t.prototype._s.call(this)},n})(u),u.prototype.uu=s.prototype.uu=function(t,i,n){var s=false;i&&(this.bu=true,(s=document.activeElement!==this.An)&&this.An.focus(),document.execCommand("undo")),this.bu=n,this.An.select(),document.execCommand("insertText",false,t),s&&this.An.blur(),this.bu=false},h.prototype.u=n.Zs.p,n.Ds.prototype.rs=function(t){var s,r,u,e,h;if(this.kr.length===t)for(u of(s=i.$("#exclusionToolbar"),r=i.$$("[data-model]",s),s.style.visibility=t?"":"hidden",r))(h=(e=n.Zs.Do[u.id]).An.parentNode.style).visibility=t||e.bs?"":"visible",h.display=!t&&e.bs?"none":""},f=i.$("#saveOptions"),c=i.$("#exportButton"),t.savedStatus=void 0,t.registerClass=void 0,a=(function(){var a,l,d,v,p=false;for(v of(t.savedStatus=function(t){return p=null!=t?t:p},a=function(){this.bu||((this.bs=this.u(this._s(),this.Os))?p&&!n.Zs.tu()&&(f.disabled=true,f.firstChild.data=i.ls("o115"),c.disabled=false,t.savedStatus(false),window.onbeforeunload=null):p||(window.onbeforeunload=function(){return i.ls("beforeUnload")},t.savedStatus(true),f.disabled=false,f.firstChild.data=i.ls("o115_2"),c.disabled=true))},l={Number:s,Boolean:r,Text:u,NonEmptyText:e,JSON:h,MaskedText:o,ExclusionRules:n.Ds},d=function(t){var i=new(0,l[t.dataset.model])(t,a);return i.ws(),n.Zs.Do[i.Ss]=i},i.$$("[data-model]")))d(v);return t.registerClass=function(t,i){l[t]=i},d})(),(d=(l=n.Zs.Do.exclusionRules).ts).ondragstart=function(t){(l.mu=t.target).style.opacity="0.5"},d.ondragend=function(){var t=l.mu;l.mu=null,t&&(t.style.opacity="")},d.ondragover=function(t){t.preventDefault()},d.ondrop=function(t){var i,n,s,r,u;t.preventDefault(),i=l.mu,n=(n=t.target).closest(".exclusionRule"),i&&n&&i!==n&&(l.ts.insertBefore(i,n),s=l.kr,r=i.querySelector(".pattern").vnode,u=n.querySelector(".pattern").vnode,s.splice(s.indexOf(r),1),s.splice(s.indexOf(u),0,r),l.ns())},n.Zs.Do.keyMappings.Ns=function(){var t,n,s=i.Rs.c,r=s.Ln,u=r?(function(t){var i,n,s=t.length>1?"Errors:\n":"Error: ";for(n of t)i=0,s+=n[0].replace(/%([a-z])/g,function(t,s){return++i,"c"===s?"":"s"===s||"d"===s?n[i]:JSON.stringify(n[i])}),i+1<n.length&&(s+=" "+n.slice(i+1).map(function(t){return"object"==typeof t&&t?JSON.stringify(t):t}).join(" ")+".\n");return s})(r):"";i.Js.Pe.l&&!u&&(t=Object.keys(s.vn).join(""),t+=(n=s.Hn)?Object.keys(n).join(""):"",/[^ -\xff]/.test(t))?this.Xs(i.ls("ignoredNonEN"),null):this.Xs(u)},g=n.Zs.Do.filterLinkHints,(v=n.Zs.Do.linkHintCharacters).Ns=(p=n.Zs.Do.linkHintNumbers).Ns=function(){this.Xs(!this.An.style.display&&this.Os.length<4?i.ls("96"):"")},g.Ns=function(){n.qs(function(t){var i=g._s();t.style.display=p.An.style.display=i?"":"none",v.An.style.display=i?"none":"",v.Ns(),p.Ns()},i.$("#waitForEnterBox"))},n.Zs.Do.ignoreKeyboardLayout.Ns=function(){var t=this;n.qs(function(i){i.style.display=t._s()>1?"none":""},i.$("#ignoreCapsLockBox"))},n.Zs.Do.vomnibarPage.Ns=function(){var t=this.An,s=this.Os,r=s.startsWith(location.protocol)||s.startsWith("front/");if(i.f<50)return n.qs(function(){t.style.textDecoration=r?"":"line-through"}),this.Xs(s===i.Js.ct.vomnibarPage?"":i.ls("onlyExtVomnibar",[50]),null);if(s=i.Js.me.vomnibarPage_f||s,r);else{if(s.startsWith("file:"))return this.Xs(i.ls("fileVomnibar"),"highlight");if(/^http:\/\/(?!localhost[:/])/i.test(s))return this.Xs(i.ls("httpVomnibar"),"highlight")}return this.Xs("")},n.Zs.Do.newTabUrl.$s={dn:0,Ks:function(t){var n=/^\/?pages\/[a-z]+.html\b/i.test(t)?chrome.runtime.getURL(t):i.Rs.r.K(t.toLowerCase());return n=n.split("?",1)[0].split("#",1)[0],t.startsWith("http")||!i.Js.q.has(n)&&!/^(?!http|ftp)[a-z\-]+:\/?\/?newtab\b\/?/i.test(t)?t:i.Js.ct.newTabUrl}},n.Zs.Do.userDefinedCss.Ns=function(){window.VApi&&VApi.z&&this.An.classList.contains("debugging")&&setTimeout(function(){var t,s,r,u=VApi.y().r;for(t of i.$$("iframe",u))s=t.classList.contains("HUD"),(r=t.contentDocument.querySelector("style.debugged"))&&(s?r.remove():r.classList.remove("debugged"));n.Zs.Do.userDefinedCss.An.classList.remove("debugging")},500)},t.xu=r,t.Nu=h,t.wu=o,t.Ou=e,t.yu=s,t.ku=u,t.createNewOption=a,t.exportBtn=c,t.saveBtn=f,Object.defineProperty(t,"Fs",{value:true})});