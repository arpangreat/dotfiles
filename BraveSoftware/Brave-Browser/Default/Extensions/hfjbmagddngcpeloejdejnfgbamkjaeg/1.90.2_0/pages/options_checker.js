__filename="pages/options_checker.js",define(["./async_bg","./options_base","./options_wnd"],function(n,t,r){"use strict";var e,s={dn:0,Us:null,Ur:function(){function n(n,t,r){var e,s,i,u,c,o,a="";if(r.length>2&&":"===r[r.length-2]&&(a=r.slice(-2),r=r.slice(0,-2)),e=t.toLowerCase(),s=r.length>1,i=e.includes("s-"),u=r.toUpperCase(),!s){if(!e)return n;if(i&&e.length<3)return a?"<"+u+a+">":u}return c=r.toLowerCase(),e=e.includes("v-")?"v-":(o=e).length<4?o:o.slice(0,-1).split("-").sort().join("-")+"-",r!==c&&!i&&(e+="s-"),e||s||a?"<"+e+c+a+">":r}this.Us=function(t){return t.replace(/<(?!<)((?:[ACMSVacmsv]-){0,4})(.[^>]*)>/g,n)},this.Ls=this.Ls.bind(this),this.Hs=this.Hs.bind(this),this.Vs=this.Vs.bind(this),this.Ur=null},Gs:function(n,t){return t?"\\u00"+t:"\\\\"},Vs:function(n,t,r,e){var s,i;r?t='"'+(r=r.replace(/\\(?:x([\da-z]{2})|\\)/gi,this.Gs))+'"':e||"\\\\"!==t||(t="\\"),s="",t.startsWith("{")&&(s=t=t.replace(/([{,] ?)(\w+):/g,'$1"$2":'));try{if("string"!=typeof(i=JSON.parse(t)))return true!==i?s?"="+s+e:n:"";t=i}catch(n){r&&(t=r)}return"="+(t=(t=t&&t.replace(/\\(\\|s)/g,function(n,t){return"s"===t?" ":n}))&&JSON.stringify(t).replace(/\s/g,this.Is))+e},Is:function(n){return"\\u"+(n.charCodeAt(0)+1048576).toString(16).slice(2)},Ls:function(n,t,r,e){var s,i,u,c=this.Us(r);return c!==r&&(console.log("KeyMappings Checker:",r,"is corrected into",c),r=c),"mapkey"===t.replace("#","").trim().toLowerCase()&&(u=(i=(s=e.match(/^\s*\S+/))&&s[0].trim())&&this.Us(i))!==i&&(console.log("KeyMappings Checker:",i,"is corrected into",u),e=e.replace(i,u)),this.Hs("",t,r,e)},Qs:function(n,t,r){return t.replace("map","mapKey")+(3===r.length?r[1]:r)},Hs:function(n,t,r,e){return(e.includes("createTab")||e.includes("openUrl"))&&/^\s+(createTab|openUrl)\s/.test(e)&&!/\surls?=/i.test(e)&&(e=this.Ws(e)),t+r+(e?e.replace(/=("(\S*(?:\s[^=]*)?)"|\S+)(\s|$)/g,this.Vs):"")},Ws:function(n){var t,r=[];return(n=(n+" ").replace(/\s(\w+:[^=\s]+|[^\s=]+:\/\/\S+)(?=\s|$)/g,function(n,t){return r.push(t),""}).trimRight())+((t=r.length)>1?" urls=":t?" url=":"")+(t?JSON.stringify(t>1?r:r[0]):"")},Ks:function(n){return n?(this.Ur&&this.Ur(),n=(n=(n=(n=(n=n.replace(/\\\\?\n/g,function(n){return 3===n.length?n:"\\\r"})).replace(/^([ \t]*(?:#\s?)?map\s+(?:<(?!<)(?:.-){0,4}.[\w:]*?>|\S)\s+)(<(?!<)(?:[ACMSVacmsv]-){0,4}.\w*?>)(?=\s|$)/gm,this.Qs)).replace(/^([ \t]*(?:#\s?)?(?:un)?map(?:[kK]ey)?\s+)(\S+)([^\n]*)/gm,this.Ls)).replace(/^([ \t]*(?:#\s?)?(?:command|shortcut)\s+)(\S+)([^\n]*)/gm,this.Hs)).replace(/\\\r/g,"\\\n").trim()):n}};for(e of(t.Zs.Do.keyMappings.$s=s,s=null,t.Zs.Do.searchUrl.$s={dn:0,Ks:function(r){var e,s,i,u=new n.Rs.Map;return n.Rs.r.Le("k:"+r,u),null==(e=u.get("k"))?n.Js.it("searchUrl",true):(s=n.Rs.r.K(e.je,null,-2),n.Rs.r.V>2?(i=n.ls("nonPlainURL",[e.je]),console.log("searchUrl checker:",i),t.Zs.Do.searchUrl.Xs(i),n.Js.it("searchUrl",true)):(s=s.replace(n.Rs.r.O,"%20"),e.Ee&&"k"!==e.Ee&&(s+=" "+e.Ee),t.Zs.Do.searchUrl.Xs(""),s))}},t.Zs.Do.vimSync.js=function(){var r,e,s,i;if(!this.bs&&true===this._s()){for(s in e=0,r=t.Zs.Do)r[s].bs||++e;if(i=e>1,setTimeout(alert,100,n.ls(i?"changedBeforeSync":"warningForSync")),i)return false}return true},t.Zs.Do.keyboard.$s={dn:0,Ks:function(t){return null!=t&&2===t.length&&t[0]>0&&t[0]<4e3&&t[1]>0&&t[1]<1e3?[+t[0],t[1]]:n.Js.ct.keyboard}},n.$$("[data-check]")))e.removeEventListener(e.dataset.check||"input",r.loadChecker)});