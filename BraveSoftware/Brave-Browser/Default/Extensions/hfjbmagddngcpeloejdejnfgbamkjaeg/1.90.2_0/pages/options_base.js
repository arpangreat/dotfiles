__filename="pages/options_base.js",define(["exports","./async_bg"],function(t,i){"use strict";var n,s,e,u,r,h,o,f=chrome.i18n.getMessage("lang1");window.__extends=function(t,i){var n=function(){this.constructor=t};n.prototype=i.prototype,t.prototype=new n},h=[],o=function(){var t,i=h.length;for(t of h)t();h.length>i?(h.splice(0,i),Promise.resolve().then(o)):h.length=0},n=function(t,i){h.length<=0&&Promise.resolve().then(o),9===i?h.unshift(t):h.push(i?t.bind(null,i):t)},s=function(t,i,n,s){var e,u=0,r=function(){var h=Date.now()-e;if(!(h<i-4&&h>=0))return u=0,e!==s?t.call(n):void 0;u=setTimeout(r,i-h)};return s=s?1:0,function(){if(e=Date.now(),!u)return u=setTimeout(r,i),s?(s=e,t.call(n)):void 0}},u=(function(t){function s(){var i=null!==t&&t.apply(this,arguments)||this;return i.u=e.p,i}return __extends(s,t),s.prototype.Ur=function(t){var n=this;this.o=t.querySelector("#exclusionTemplate").content.querySelector(".exclusionRule"),this.ts=t.querySelector("tbody"),this.kr=[],this.ts.addEventListener("input",s.is),this.ts.addEventListener("input",this.ns),this.ts.addEventListener("click",function(t){return n.ss(t)}),this.es=false,i.$("#exclusionAddButton").onclick=function(){return n.us("")}},s.prototype.rs=function(){},s.is=function(t){var i=t.target.vnode;i&&(i.hs=true)},s.prototype.us=function(t,i){this.os(this.ts,{pattern:t,passKeys:""});var s=this.kr[this.kr.length-1];false!==i&&n(function(){return s.fs.focus()}),t&&this.ns(),this.rs(1)},s.prototype.as=function(t){var n,s,u;if(!this.es)for(n of(this.es=true,e.cs&&(this.o.draggable=true),f?i.$$("[title]",this.o):[]))(s=i.ls(n.title))&&(n.title=s);return this.ts.textContent="",this.kr=[],t.length<=0||(1===t.length?this.os(this.ts,t[0]):(u=document.createDocumentFragment(),t.forEach(this.os.bind(this,u)),this.ts.appendChild(u))),this.rs(t.length)},s.prototype.ps=function(){return true},s.prototype.os=function(t,i){var n,s,e,u,r,h=i.pattern,o=i.passKeys,f={vs:{pattern:h,passKeys:o},hs:false,Yr:false,fs:null,ds:null};this.ps(h)?(s=(n=document.importNode(this.o,true)).querySelector(".pattern"),e=n.querySelector(".passKeys"),u=o.trimRight(),s.value=h,h&&(s.placeholder=""),e.value=u,u&&(e.placeholder=""),(r=f).Yr=true,r.fs=s,r.ds=e,s.vnode=r,e.vnode=r,this.kr.push(r),t.appendChild(n)):this.kr.push(f)},s.ms=function(t){t.vs.pattern&&t.ds.placeholder&&(t.ds.placeholder="")},s.prototype.ss=function(t){var i,n=t.target;if("path"===n.localName&&(n=n.parentElement),"svg"===n.localName&&(n=n.parentElement),n.classList.contains("remove"))return(n=n.parentNode.parentNode).classList.contains("exclusionRule")?(i=n.querySelector(".pattern").vnode,n.remove(),this.kr.splice(this.kr.indexOf(i),1),this.ns(),this.rs(0)):void 0},s.ys=function(t,i,n){var s=n.toLowerCase();return i||1!==n.length?n!==s?"<"+i+"s-"+s+">":t:n},s.gs=function(t){return t&&t.replace(/<(?!<)((?:[acm]-){0,3})(\S|[A-Za-z]\w+)>/g,s.ys)},s.prototype._s=function(t){var i,n,e,u,r,h,o,f,a=[];for(i of(t=true===t,this.kr))t&&!i.Yr||(i.hs?(n=i.fs.value.trim(),e=false,u=i.ds.value,n?((r=n.startsWith(":")?0:n.indexOf("://"))&&(/^[\^*]|[^\\][$()*+?\[\]{|}]/.test(n)?n.startsWith("^")||(e=!n.includes("/",r+3),n=(r<0?"^https?://":"^")+(n.startsWith("*")&&"."!==n[1]?"[^/]"+n:(n=n.replace(/\./g,"\\.")).startsWith("*")?n.replace("*\\.","(?:[^./]+\\.)*?"):n.replace("://*\\.","://(?:[^./]+\\.)*?"))):(e=!n.includes("/",r+3)&&!n.startsWith("vimium:"),n=(r<0?":http://":":")+(n=n.replace(/\\(.)/g,"$1")))),e&&(n+="/"),u&&((h=(u=s.gs(u)).match(/<(?!<)(?:a-)?(?:c-)?(?:m-)?(?:s-)?(?:[a-z]\w+|[^\sA-Z])>|\S/g))&&((o="^"===h[0]&&h.length>1)&&h.shift(),h.sort(),o?h.unshift("^"):"^"===h[0]&&(h.shift(),h.push("^"))),u=(u=h?h.join(" ")+" ":"").replace(/<escape>/gi,"<esc>")),i.ds.title!==(f=u?u.length>1&&"^"===u[0]?"only hook such keys":"pass through such keys":"completely disabled")&&(i.ds.title=f),this.xs(i,n,u),a.push(i.vs)):this.xs(i,"",u)):i.vs.pattern&&a.push(i.vs));return a},s.prototype.xs=function(t,i,n){var e=!t.vs.passKeys&&!!n;t.vs={pattern:i,passKeys:n},t.hs=false,e&&s.ms(t)},s.prototype.Ns=function(){var t,i;for(t of this.kr)t.Yr&&(t.fs.value!==t.vs.pattern&&(t.fs.value=t.vs.pattern),i=t.vs.passKeys.trim(),t.ds.value!==i&&(t.ds.value=i))},s})(e=(function(){function t(t,n){this.An=t,this.Ss=t.id,this.Os=this.ns=null,this.bs=false,this.Ss in i.Js.ht&&(n=this.ks.bind(this,n)),this.ns=s(n,330,this,1),this.Ur(t)}return t.prototype.Ns=function(){},t.prototype.ws=function(){this.bs=true,this.Os=i.Js.it(this.Ss),t.zs||this.as(this.Os)},t.prototype.Ps=function(t,n,s){var e=this.$s;return n?(s=e||!s?JSON.stringify(e?e.Ks(t):t):s,i.Rs.JSON.parse(s)):e?e.Ks(t):t},t.prototype.js=function(){return true},t.prototype.As=function(){var t=this._s(),i="object"==typeof t,n=i?JSON.stringify(this.Os):this.Os,s=i?JSON.stringify(t):t;s!==n&&(n=s,t=this.Ps(t,i,i?s:""),this.Os=t=this.Ms(t,i,s),this.bs=true,(n!==(i?JSON.stringify(t):t)||this.Ts(t))&&this.as(t,true),this.Ns())},t.prototype.Cs=function(){return!this.u(this.Os,i.Js.it(this.Ss))},t.prototype.Ms=function(n,s){return s&&JSON.stringify(n)===JSON.stringify(i.Js.ct[this.Ss])&&(n=i.Js.ct[this.Ss]),i.Js.lt(this.Ss,n),this.Ss in i.Js.ht&&t.cs.push(this.Ss),i.Js.it(this.Ss)},t.prototype.Ts=function(){return false},t.p=function(t,i){return JSON.stringify(t)===JSON.stringify(i)},t.zs=true,t})()),r=i.f<48||devicePixelRatio<2&&i.f>=61?function(){var t=document.createElement("style"),n=devicePixelRatio,s=i.f>=61&&n>=1,e=s||i.f>=48?1/n:1;e=(""+(e+=999e-8)).slice(0,7).replace(/\.?0+$/,""),t.textContent=s?"html { --tiny: "+e+"px; }":"* { border-width: "+e+"px !important; }",document.head.appendChild(t)}:null,t.Ds=u,t.Zs=e,t.Bs=s,t.qs=n,t.Es=r,t.showI18n=function(){var t,n,s,e,u;if(f){if(t=navigator.language||i.ls("lang2"),(s=(n=i.$("#keyMappings"))&&i.ls("keyMappingsP"))&&(n.placeholder=s),t&&("zh"!==f||"zh-CN"!==t))for(n of i.$$("input[type=text], textarea"))n.lang=t;for(n of i.$$("[data-i]"))u=(e=n.dataset.i).endsWith("-t"),((s=i.ls(u?e.slice(0,-2):e))||"NS"===e)&&(u?n.title=s:n.innerText=s);document.documentElement.lang="zh"===f?"zh-CN":f}},Object.defineProperty(t,"Fs",{value:true})});