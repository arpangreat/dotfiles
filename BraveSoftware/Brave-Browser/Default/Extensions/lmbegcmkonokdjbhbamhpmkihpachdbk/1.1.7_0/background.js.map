{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/background/scenes.js","webpack:///./src/utils/request.js","webpack:///./src/background/settings.js","webpack:///./src/background/records.js","webpack:///./src/background/userinfos.js","webpack:///./src/background/page-histories.js","webpack:///./src/background/timer.js","webpack:///./src/background/scene-picker.js","webpack:///./src/background/player.js","webpack:///./src/background/notifications.js","webpack:///./src/background.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","background","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","scenes","id","zh-Hans","zh-Hant","en","sound_url","cover_url","scene_masks","primary_color","env","localStorage","getItem","baseURL","options","withCredentials","headers","Accept","Content-Type","ML-AppID","paramsSerializer","params","qs","stringify","indices","request","axios","interceptors","response","use","msg","error","promise_default","a","reject","code","message","events","EventEmitter","_immersiveMode","_whiteList","_workMode","_autoFocus","_autoBreak","_focusDuration","_breakDuration","_longBreakDuration","_longBreakFrequency","_autoFocusCycle","sync","chrome","storage","set","settings","immersiveMode","whiteList","workMode","autoFocus","autoBreak","focusDuration","breakDuration","longBreakDuration","longBreakFrequency","autoFocusCycle","onChanged","addListener","changes","newSettings","newValue","res","emit","on","event","listener","Proxy","target","prop","heldRecords","reportedPauses","reportedScenes","this_week_duration","this_week_times","today_duration","today_times","total_duration","total_times","genGuid","s4","Math","floor","random","toString","substring","getTodayRange","now","Date","nowDay","getDate","nowMonth","getMonth","nowYear","getFullYear","todayStartedAt","todayEndedAt","getWeekRange","weekStartedAt","weekEndedAt","nowDayOfWeek","getDay","fetchRecords","_callee","regeneratorRuntime","wrap","_context","prev","next","userInfos","url","time_zone_offset","getTimezoneOffset","localtime","parse_int_default","sent","getLocalRecords","records","abrupt","stop","clearRecords","randomNum","minNum","maxNum","arguments","addPauseDuration","endedAt","startedAt","timer","paused_at","started_at","ended_at","duration","addSceneDuration","reportedScenesLength","scene_id","picker","current","resetReportData","_callee3","_context3","resolve","local","_ref","asyncToGenerator","mark","_callee2","todayRange","weekRange","_context2","forEach","record","weekFlag","_x4","this","reportedData","_callee4","finish","progress","base_score","negative_score","positive_score","total_score","_context4","remain","focus_mode","finished_type","pauses","map","log","local_id","version","device_id","record_at","client_platform","client_version","sendReport","reportedBreakData","_callee5","_context5","_callee6","_context6","method","t0","holdRecord","syncRecords","_callee8","_context8","_ref2","_callee7","_context7","remove","console","_x5","popupCenter","title","w","h","dualScreenLeft","undefined","screenLeft","screenX","dualScreenTop","screenTop","screenY","width","innerWidth","document","documentElement","clientWidth","screen","height","innerHeight","clientHeight","systemZoom","availWidth","left","top","newWindow","open","focus","initUserInfos","pageHistories","syncLogs","requestLogin","loginWithCode","runtime","sendMessage","type","logout","refreshToken","clearupHandle","serverTime","serverTimeOffset","batchStore","_syncLogs","calibrationTimeStampOffset","_calibrationTimeStampOffset","_ref3","timestamp","_x","_syncLogs2","logs","domain","split","addLog","_x2","_addLog","performance","requestClearing","_requestClearing","clearTimeout","setTimeout","saveLogs","reset","_saveLogs","getLocalLogs","_x3","setInterval","nextStage","continuousFoucsTimes","stages","genStages","concat","toConsumableArray","sendMessageToContentScript","tabs","query","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","get_iterator_default","done","tab","whiteItem","find","includes","err","return","oldSettings","oldValue","status","applyStage","browserAction","setBadgeBackgroundColor","color","finishedAt","timerHandle","start","play","dispatchEvent","Event","stage","continuePlay","continuedAt","clearInterval","badgeText","ceil","setBadgeText","text","i18n","getMessage","pause","skip","dontNotification","isLastStage","nextStageisLongBreak","notifications","focusFinish","lastBreakFinish","breakFinish","setNextStage","setFocusDuration","ms","continue","getScenes","configs","scenesCount","setIndex","index","CustomEvent","detail","audio","getElementById","adjustVolume","_adjustVolume","newVolume","element","easing","interval","originalVolume","direction","delta","ticks","tick","swing","volume","cos","PI","player","muted","src","playFlag","paused","ended","played","then","addEventListener","currentTime","ring","formatDuration","totalMin","sec","min","hour","createNotifications","notificationId","state","totalTimes","times","buttons","iconUrl","focusFinishAction","buttonIndex","breakFinishAction","onButtonClicked","_notificationId$split","_notificationId$split2","slicedToArray","notificationType","_gaq","ga","createElement","async","getElementsByTagName","parentNode","insertBefore","onMessage","sender","syncData"],"mappings":"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","file":"background.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"background\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([3,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","window.scenes = [{\n    \"id\": \"ocean\",\n    \"name\": {\n      \"zh-Hans\": \"海浪\",\n      \"zh-Hant\": \"海洋\",\n      \"en\": \"Ocean\"\n    },\n    \"sound_url\": \"https://pics.tide.moreless.io/chrome/scene_ocean.mp3\",\n    \"cover_url\": \"http://pics.tide.moreless.io/preset_img/preset_focus_ocean.jpeg\",\n    \"scene_masks\": [\"170,170,170,0.56\", \"8,8,8,0.56\"],\n    \"primary_color\": \"21,95,106,1\"\n  },\n  {\n    \"id\": \"rain\",\n    \"name\": {\n      \"zh-Hans\": \"雨天\",\n      \"zh-Hant\": \"雨天\",\n      \"en\": \"Rain\"\n    },\n    \"sound_url\": \"https://pics.tide.moreless.io/chrome/scene_rain.mp3\",\n    \"cover_url\": \"http://pics.tide.moreless.io/preset_img/preset_focus_rain.jpeg\",\n    \"scene_masks\": [\"157,211,255,0.56\", \"0,40,80,0.56\"],\n    \"primary_color\": \"28,53,23,1\"\n  },\n  {\n    \"id\": \"forest\",\n    \"name\": {\n      \"zh-Hans\": \"森林\",\n      \"zh-Hant\": \"森林\",\n      \"en\": \"Forest\"\n    },\n    \"sound_url\": \"https://pics.tide.moreless.io/chrome/scene_forest.mp3\",\n    \"cover_url\": \"http://pics.tide.moreless.io/scenes/ln1kjd0GnkYXV_LsgFjOlsQRav5j\",\n    \"scene_masks\": [\"145,255,199,0.56\", \"0,60,0,0.56\"],\n    \"primary_color\": \"6, 39, 12, 1\"\n  },\n  {\n    \"id\": \"muse\",\n    \"name\": {\n      \"zh-Hans\": \"冥想\",\n      \"zh-Hant\": \"冥想\",\n      \"en\": \"Muse\"\n    },\n    \"sound_url\": \"https://pics.tide.moreless.io/chrome/scene_meditation.mp3\",\n    \"cover_url\": \"http://pics.tide.moreless.io/preset_img/preset_focus_muse.jpeg\",\n    \"scene_masks\": [\"234,189,255,0.56\", \"33,2,63,0.56\"],\n    \"primary_color\": \"96,91,90,1\"\n  },\n  {\n    \"id\": \"cafe\",\n    \"name\": {\n      \"zh-Hans\": \"咖啡\",\n      \"zh-Hant\": \"咖啡店\",\n      \"en\": \"Café\"\n    },\n    \"sound_url\": \"https://pics.tide.moreless.io/chrome/scene_coffee.mp3\",\n    \"cover_url\": \"http://pics.tide.moreless.io/scenes/FsHwADXbmEVcvdx7arLfykNsk-k6\",\n    \"scene_masks\": [\"255,158,128,0.56\", \"123,29,0,0.56\"],\n    \"primary_color\": \"30,30,30,1.0\"\n  }\n]","/* eslint-disable no-debugger */\n/* eslint-disable no-console */\nimport axios from 'axios'\nimport qs from 'qs'\n\nconst env = localStorage.getItem('env')\nlet baseURL = 'https://tide-api.moreless.io'\nif (env === 'dev') {\n  baseURL = 'https://tide-api.moreless.io'\n}\n\nconst options = {\n  baseURL: baseURL,\n  withCredentials: true,\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n    'ML-AppID': 7\n  },\n  data: {},\n  paramsSerializer(params) {\n    return qs.stringify(params, {\n      indices: false\n    })\n  }\n}\nconst request = axios.create(options)\n\nrequest.interceptors.response.use(function (response) {\n  // 对响应数据做点什么\n  if (response.data) {\n    return response.data;\n  } else {\n    return {\n      msg: 'ok'\n    }\n  }\n}, function (error) {\n  // 对响应错误做点什么\n  if (error.response) {\n    return Promise.reject(error.response.data);\n  } else {\n    return Promise.reject({\n      code: -1,\n      msg: error.message\n    })\n  }\n})\n\nwindow.request = request","/* eslint-disable no-debugger */\n/* eslint-disable no-console */\n/* global chrome */\nimport {\n  EventEmitter\n} from 'events';\n(function () {\n  \"use strict\";\n  const events = new EventEmitter();\n  // 设置项\n  //   专注时长, 休息时长, 长休息时长\n  //   工作模式, 沉浸模式\n  //   自动专注, 自动休息\n  //   连续专注周期\n  //   白名单\n\n  let _immersiveMode = false\n  let _whiteList = []\n\n  let _workMode = false\n  let _autoFocus = false\n  let _autoBreak = false\n  let _focusDuration = 60000 * 25\n  let _breakDuration = 60000 * 5\n  let _longBreakDuration = 60000 * 20\n  let _longBreakFrequency = 4\n  let _autoFocusCycle = 0\n  chrome.storage.onChanged.addListener((changes) => {\n    if (changes.settings) {\n      const newSettings = changes.settings.newValue\n\n      _immersiveMode = newSettings.immersiveMode\n      _whiteList = newSettings.whiteList\n      _workMode = newSettings.workMode\n      _autoFocus = newSettings.autoFocus\n      _autoBreak = newSettings.autoBreak\n      _focusDuration = newSettings.focusDuration\n      _breakDuration = newSettings.breakDuration\n      _longBreakDuration = newSettings.longBreakDuration\n      _longBreakFrequency = newSettings.longBreakFrequency\n      _autoFocusCycle = newSettings.autoFocusCycle\n    }\n  });\n\n  chrome.storage.sync.get('settings', res => {\n    if (res.settings) {\n      const settings = res.settings\n      _immersiveMode = settings.immersiveMode\n      _whiteList = settings.whiteList\n      _workMode = settings.workMode\n      _autoFocus = settings.autoFocus\n      _autoBreak = settings.autoBreak\n      _focusDuration = settings.focusDuration\n      _breakDuration = settings.breakDuration\n      _longBreakDuration = settings.longBreakDuration\n      _longBreakFrequency = settings.longBreakFrequency\n      _autoFocusCycle = settings.autoFocusCycle\n    }\n    events.emit('inited')\n  })\n\n  function sync() {\n    chrome.storage.sync.set({\n      settings: {\n        immersiveMode: _immersiveMode,\n        whiteList: _whiteList,\n        workMode: _workMode,\n        autoFocus: _autoFocus,\n        autoBreak: _autoBreak,\n        focusDuration: _focusDuration,\n        breakDuration: _breakDuration,\n        longBreakDuration: _longBreakDuration,\n        longBreakFrequency: _longBreakFrequency,\n        autoFocusCycle: _autoFocusCycle\n      }\n    })\n  }\n\n  const settings = {\n\n    on(event, listener) {\n      events.on(event, listener)\n    },\n\n    set immersiveMode(newValue) {\n      if (_immersiveMode !== newValue) {\n        _immersiveMode = newValue\n        sync()\n      }\n    },\n    get immersiveMode() {\n      return _immersiveMode\n    },\n\n    get whiteList() {\n      return new Proxy(_whiteList, {\n        set(target, prop, value) {\n          target[prop] = value\n          sync()\n          return true\n        }\n      })\n    },\n\n    set workMode(newValue) {\n      if (_workMode !== newValue) {\n        _workMode = newValue\n        sync()\n      }\n    },\n    get workMode() {\n      return _workMode\n    },\n\n\n    set autoFocus(newValue) {\n      if (_autoFocus !== newValue) {\n        _autoFocus = newValue\n        sync()\n      }\n    },\n    get autoFocus() {\n      return _autoFocus\n    },\n\n\n    set autoBreak(newValue) {\n      if (_autoBreak !== newValue) {\n        _autoBreak = newValue\n        sync()\n      }\n    },\n    get autoBreak() {\n      return _autoBreak\n    },\n\n\n    set focusDuration(newValue) {\n      if (_focusDuration !== newValue) {\n        _focusDuration = newValue\n        sync()\n      }\n    },\n    get focusDuration() {\n      return _focusDuration\n    },\n\n\n    set breakDuration(newValue) {\n      if (_breakDuration !== newValue) {\n        _breakDuration = newValue\n        sync()\n      }\n    },\n    get breakDuration() {\n      return _breakDuration\n    },\n\n\n    set longBreakDuration(newValue) {\n      if (_longBreakDuration !== newValue) {\n        _longBreakDuration = newValue\n        sync()\n      }\n    },\n    get longBreakDuration() {\n      return _longBreakDuration\n    },\n\n\n    set longBreakFrequency(newValue) {\n      if (_longBreakFrequency !== newValue) {\n        _longBreakFrequency = newValue\n        sync()\n      }\n    },\n    get longBreakFrequency() {\n      return _longBreakFrequency\n    },\n\n\n    set autoFocusCycle(newValue) {\n      if (_autoFocusCycle !== newValue) {\n        _autoFocusCycle = newValue\n        sync()\n      }\n    },\n    get autoFocusCycle() {\n      return _autoFocusCycle\n    }\n\n  };\n\n  window.settings = settings;\n})()","/* eslint-disable no-debugger */\n/* eslint-disable no-console */\n/* global chrome, userInfos, timer, picker, request, settings */\n\nlet heldRecords = []\nlet reportedPauses = []\nlet reportedScenes = []\nlet data = {\n  this_week_duration: 0,\n  this_week_times: 0,\n  today_duration: 0,\n  today_times: 0,\n  total_duration: 0,\n  total_times: 0\n}\n\nfunction genGuid() {\n  function s4() {\n    return Math.floor((1 + Math.random()) * 0x10000)\n      .toString(16)\n      .substring(1);\n  }\n  return (\n    s4() +\n    s4() +\n    \"-\" +\n    s4() +\n    \"-\" +\n    s4() +\n    \"-\" +\n    s4() +\n    \"-\" +\n    s4() +\n    s4() +\n    s4()\n  );\n}\n\nfunction getTodayRange() {\n  var now = new Date(); //当前日期\n  var nowDay = now.getDate(); //当前日\n  var nowMonth = now.getMonth(); //当前月\n  var nowYear = now.getFullYear(); //当前年\n  var todayStartedAt = new Date(nowYear, nowMonth, nowDay);\n  var todayEndedAt = new Date(nowYear, nowMonth, nowDay, 23, 59, 59);\n  return [todayStartedAt / 1000, todayEndedAt / 1000];\n}\n\nfunction getWeekRange() {\n  var now = new Date(); //当前日期\n  var nowDayOfWeek = now.getDay(); //今天本周的第几天\n  var nowDay = now.getDate(); //当前日\n  var nowMonth = now.getMonth(); //当前月\n  var nowYear = now.getFullYear(); //当前年\n  var weekStartedAt\n  var weekEndedAt\n  if (nowDayOfWeek) {\n    weekStartedAt = new Date(nowYear, nowMonth, nowDay - nowDayOfWeek + 1);\n    weekEndedAt = new Date(\n      nowYear,\n      nowMonth,\n      nowDay + (7 - nowDayOfWeek),\n      23,\n      59,\n      59\n    )\n  } else {\n    weekStartedAt = new Date(nowYear, nowMonth, -7);\n    weekEndedAt = new Date(\n      nowYear,\n      nowMonth,\n      nowDay,\n      23,\n      59,\n      59\n    )\n  }\n  return [weekStartedAt / 1000, weekEndedAt / 1000];\n}\n\nasync function fetchRecords() {\n  let data\n  if (userInfos) {\n    data = await request({\n      url: \"/v1/chrome_ext/users/self/focus/records/report\",\n      params: {\n        time_zone_offset: -(new Date().getTimezoneOffset() * 60),\n        localtime: parseInt(+new Date() / 1000)\n      }\n    })\n  } else {\n    data = await getLocalRecords()\n  }\n  window.records.data = data\n  return data\n}\n\nfunction clearRecords() {\n  window.records.data = {\n    this_week_duration: 0,\n    this_week_times: 0,\n    today_duration: 0,\n    today_times: 0,\n    total_duration: 0,\n    total_times: 0\n  }\n}\n\nfunction randomNum(minNum, maxNum) {\n  switch (arguments.length) {\n    case 1:\n      return parseInt(Math.random() * minNum + 1, 10);\n    case 2:\n      return parseInt(Math.random() * (maxNum - minNum + 1) + minNum, 10);\n    default:\n      return 0;\n  }\n}\n\nfunction addPauseDuration(endedAt) {\n  const startedAt = timer.paused_at\n  reportedPauses.push({\n    started_at: startedAt,\n    ended_at: endedAt,\n    duration: endedAt - startedAt\n  })\n}\n\nfunction addSceneDuration() {\n  const endedAt = +new Date()\n  let startedAt\n  let reportedScenesLength = reportedScenes.length\n  if (!reportedScenesLength) {\n    startedAt = timer.started_at\n  } else {\n    startedAt = reportedScenes[reportedScenesLength - 1].ended_at\n  }\n  reportedScenes.push({\n    started_at: startedAt,\n    ended_at: endedAt,\n    scene_id: picker.scenes[picker.current].id\n  })\n}\n\nfunction resetReportData() {\n  reportedPauses = []\n  reportedScenes = []\n}\n\nasync function getLocalRecords() {\n  return new Promise((resolve) => {\n    chrome.storage.local.get('heldRecords', async (data) => {\n      if (data.heldRecords) {\n        let this_week_duration = 0;\n        let this_week_times = 0;\n        let today_duration = 0;\n        let today_times = 0;\n        let total_duration = 0;\n        let total_times = 0;\n        const records = data.heldRecords;\n        const todayRange = getTodayRange();\n        const weekRange = getWeekRange();\n        records.forEach(record => {\n          let weekFlag = false;\n\n          if (weekRange[0] <= record.started_at && record.ended_at <= weekRange[1]) {\n            // 最基本的情况，整段落入区间\n            this_week_duration += (record.ended_at - record.started_at);\n            this_week_times += 1;\n            weekFlag = true;\n          } else if (record.started_at <= weekRange[0] && weekRange[0] <= record.ended_at && record.ended_at <= weekRange[1]) {\n            // 只有结束时间落入区间\n            this_week_duration += (record.ended_at - weekRange[0]);\n            this_week_times += 1;\n            weekFlag = true;\n          } else if (weekRange[0] <= record.started_at && weekRange[1] <= record.ended_at) {\n            // 只有开始时间落入区间\n            this_week_duration += (record.ended_at - record.started_at);\n            this_week_times += 1;\n            weekFlag = true;\n          }\n\n          if (weekFlag) {\n            if (todayRange[0] <= record.started_at && record.ended_at <= todayRange[1]) {\n              // 最基本的情况，整段落入区间\n              today_duration += (record.ended_at - record.started_at);\n              today_times += 1;\n            } else if (record.started_at <= todayRange[0] && todayRange[0] <= record.ended_at && record.ended_at <= todayRange[1]) {\n              // 只有结束时间落入区间\n              today_duration += (record.ended_at - todayRange[0]);\n              today_times += 1;\n            } else if (todayRange[0] <= record.started_at && todayRange[1] <= record.ended_at) {\n              // 只有开始时间落入区间\n              today_duration += (record.ended_at - record.started_at);\n              today_times += 1;\n            }\n          }\n\n          total_duration += record.duration;\n          total_times += 1;\n        });\n        resolve({\n          this_week_duration,\n          this_week_times,\n          today_duration,\n          today_times,\n          total_duration,\n          total_times\n        })\n      } else {\n        resolve({\n          this_week_duration: 0,\n          this_week_times: 0,\n          today_duration: 0,\n          today_times: 0,\n          total_duration: 0,\n          total_times: 0\n        })\n      }\n    })\n  })\n}\n\nasync function reportedData(finish) {\n  const startedAt = timer.started_at / 1000\n  const endedAt = +new Date() / 1000\n  const progress = timer.duration - timer.remain\n  const base_score = 20\n  const negative_score = randomNum(50, 70)\n  const positive_score = 15\n  let total_score = base_score + negative_score + positive_score\n  if (total_score > 100) {\n    total_score = 100\n  }\n  if (progress >= 0) {\n    const record = {\n      \"started_at\": startedAt,\n      \"ended_at\": endedAt,\n      \"duration\": parseInt(timer.duration / 1000),\n      \"progress\": parseInt(progress / 1000),\n      \"focus_mode\": settings.immersiveMode ? \"immersive\" : 'normal',\n      \"finished_type\": finish ? \"finish\" : 'giveup',\n      \"pauses\": reportedPauses.map((log) => {\n        return {\n          started_at: log.started_at / 1000,\n          ended_at: log.ended_at / 1000,\n          duration: parseInt(log.duration / 1000)\n        }\n      }),\n      base_score,\n      negative_score,\n      positive_score,\n      total_score,\n      local_id: genGuid(),\n      \"version\": 1,\n      \"device_id\": \"chrome\",\n      \"record_at\": endedAt,\n      \"client_platform\": \"Chrome\",\n      \"client_version\": \"1.0.1\"\n    }\n    await sendReport(record)\n    fetchRecords()\n  }\n}\n\nasync function reportedBreakData(finish) {\n  const startedAt = timer.started_at / 1000\n  const endedAt = +new Date() / 1000\n  const progress = timer.duration - timer.remain\n  const base_score = 20\n  const negative_score = randomNum(50, 70)\n  const positive_score = 15\n  let total_score = base_score + negative_score + positive_score\n  if (total_score > 100) {\n    total_score = 100\n  }\n  if (progress >= 0) {\n    const record = {\n      \"started_at\": startedAt,\n      \"ended_at\": endedAt,\n      \"duration\": parseInt(timer.duration / 1000),\n      \"progress\": parseInt(progress / 1000),\n      \"focus_mode\": 'rest',\n      \"finished_type\": finish ? \"finish\" : 'giveup',\n      \"pauses\": reportedPauses.map((log) => {\n        return {\n          started_at: log.started_at / 1000,\n          ended_at: log.ended_at / 1000,\n          duration: parseInt(log.duration / 1000)\n        }\n      }),\n      base_score,\n      negative_score,\n      positive_score,\n      total_score,\n      local_id: genGuid(),\n      \"version\": 1,\n      \"device_id\": \"chrome\",\n      \"record_at\": endedAt,\n      \"client_platform\": \"Chrome\",\n      \"client_version\": \"1.0.1\"\n    }\n    await sendReport(record)\n    fetchRecords()\n  }\n}\n\nasync function sendReport(record) {\n  if (userInfos) {\n    try {\n      await request({\n        method: 'POST',\n        url: \"/v1/chrome_ext/users/self/focus/records\",\n        data: {\n          records: [record]\n        }\n      });\n    } catch (e) {\n      holdRecord(record)\n    }\n  } else {\n    holdRecord(record)\n  }\n}\n\nfunction holdRecord(record) {\n  heldRecords.push(record)\n  if (heldRecords.length > 10000) {\n    heldRecords.splice(0, 1)\n  }\n  chrome.storage.local.set({\n    heldRecords\n  });\n}\n\nasync function syncRecords() {\n  chrome.storage.local.get('heldRecords', async (data) => {\n    if (data.heldRecords) {\n      if (userInfos) {\n        try {\n          await request({\n            method: 'POST',\n            url: \"/v1/chrome_ext/users/self/focus/records\",\n            data: {\n              records: data.heldRecords\n            }\n          });\n          heldRecords = []\n          chrome.storage.local.remove('heldRecords')\n        } catch (e) {\n          console.log(e)\n          heldRecords = data.heldRecords\n        }\n      } else {\n        heldRecords = data.heldRecords\n      }\n      fetchRecords()\n    }\n  });\n\n}\n\n\nwindow.records = {\n  addPauseDuration,\n  addSceneDuration,\n  getLocalRecords,\n  resetReportData,\n  reportedData,\n  reportedBreakData,\n  fetchRecords,\n  clearRecords,\n  syncRecords,\n  data\n}","/* eslint-disable no-debugger */\n/* eslint-disable no-console */\n/* global chrome, request, records, pageHistories */\n\nfunction popupCenter(url, title, w, h) {\n  // Fixes dual-screen position                         Most browsers      Firefox\n  var dualScreenLeft =\n    window.screenLeft != undefined ? window.screenLeft : window.screenX;\n  var dualScreenTop =\n    window.screenTop != undefined ? window.screenTop : window.screenY;\n\n  var width = window.innerWidth ?\n    window.innerWidth :\n    document.documentElement.clientWidth ?\n    document.documentElement.clientWidth :\n    screen.width;\n  var height = window.innerHeight ?\n    window.innerHeight :\n    document.documentElement.clientHeight ?\n    document.documentElement.clientHeight :\n    screen.height;\n\n  var systemZoom = width / window.screen.availWidth;\n  var left = (width - w) / 2 / systemZoom + dualScreenLeft;\n  var top = (height - h) / 2 / systemZoom + dualScreenTop;\n  var newWindow = window.open(\n    url,\n    title,\n    \"toolbar=no,location=no,directories=no,menubar=no,scrollbars=no,resizable=no,status=no, width=\" +\n    w / systemZoom +\n    \", height=\" +\n    h / systemZoom +\n    \", top=\" +\n    top +\n    \", left=\" +\n    left\n  );\n\n  // Puts focus on the newWindow\n  if (window.focus) newWindow.focus();\n}\n\nasync function initUserInfos(userInfos) {\n  try {\n    if (!userInfos) {\n      userInfos = await request({\n        url: \"/v1/chrome_ext/users/self\"\n      })\n    }\n    window.userInfos = userInfos\n    await pageHistories.syncLogs()\n    await records.syncRecords()\n    await records.fetchRecords()\n  } catch (e) {\n    window.userInfos = null\n    window.records.clearRecords()\n  }\n}\n\nasync function requestLogin() {\n  popupCenter(\n    \"https://tide-api.moreless.io/static/login?platform=chrome_ext\",\n    \"TideLogin\",\n    1024,\n    768\n  );\n}\n\nasync function loginWithCode(code) {\n  const userInfos = await request({\n    method: \"POST\",\n    url: \"/v1/chrome_ext/code_login\",\n    data: {\n      code\n    }\n  })\n  window.userInfos = userInfos\n  await initUserInfos(userInfos)\n  chrome.runtime.sendMessage({\n    type: 'logined',\n    userInfos\n  });\n  return userInfos\n}\n\nasync function logout(data) {\n  await request({\n    url: \"/v1/chrome_ext/logout\",\n    method: \"POST\",\n    data\n  })\n  window.userInfos = null\n  chrome.runtime.sendMessage({\n    type: 'logout'\n  });\n  records.clearRecords()\n}\n\nasync function refreshToken() {\n  if (window.userInfos) {\n    window.userInfos = await request({\n      url: '/v1/chrome_ext/users/self/refresh_token',\n    })\n  }\n}\n\nwindow.userInfos = null\n\nwindow.initUserInfos = initUserInfos\nwindow.loginWithCode = loginWithCode\nwindow.requestLogin = requestLogin\nwindow.logout = logout\nwindow.refreshToken = refreshToken","/* eslint-disable no-debugger */\n/* eslint-disable no-console */\n/* global chrome, request */\n\n// 处理上一次退出浏览器时，没采集的最后一条记录\n\n(function () {\n  \"use strict\";\n\n  // 为了减少请求数，需要将记录聚合起来一并采集，请求发送成功后需要清除重置\n  let clearupHandle = null\n  let serverTime = +new Date()\n  let serverTimeOffset = 0\n  let batchStore = []\n\n  setInterval(async () => {\n    const data = await request({\n      url: '/v1/server_time',\n    })\n    serverTimeOffset = data.timestamp * 1000 - (serverTime + performance.now())\n  }, 3600000);\n\n  calibrationTimeStampOffset()\n\n  function syncLogs() {\n    chrome.storage.local.get('batchStore', (data) => {\n      if (data.batchStore) {\n        _syncLogs(data.batchStore)\n      }\n    });\n  }\n\n  async function calibrationTimeStampOffset() {\n    const {\n      timestamp\n    } = await request({\n      url: '/v1/server_time',\n    })\n    serverTime = timestamp * 1000\n  }\n\n  async function _syncLogs(logs) {\n    const records = logs.map(log => {\n      return {\n        domain: log.url.split('/')[2],\n        started_at: parseInt(log.started_at / 1000),\n        duration: parseInt(log.duration / 1000)\n      }\n    })\n    if (window.userInfos) {\n      try {\n        await request({\n          url: '/v1/chrome_ext/page_histories',\n          method: 'POST',\n          data: {\n            records,\n            time_zone_offset: -(new Date().getTimezoneOffset() * 60)\n          }\n        })\n        batchStore = []\n        chrome.storage.local.remove('batchStore')\n      } catch (e) {\n        batchStore = logs\n      }\n    } else {\n      batchStore = logs\n    }\n  }\n\n  async function addLog(log) {\n    log.started_at = serverTime + serverTimeOffset + performance.now() - log.duration\n    batchStore.push(log)\n    if (batchStore.length > 10000) {\n      batchStore.splice(0, 1)\n    }\n    chrome.storage.local.set({\n      batchStore\n    });\n    if (window.userInfos) {\n      await requestClearing()\n    }\n  }\n\n  async function requestClearing() {\n    clearTimeout(clearupHandle)\n    clearupHandle = setTimeout(async () => {\n      try {\n        await saveLogs()\n        reset()\n      } catch (e) {\n        console.log(e)\n      }\n      clearupHandle = null\n    }, 2000);\n  }\n\n  function reset() {\n    batchStore = []\n    chrome.storage.local.remove('batchStore')\n  }\n\n\n  async function saveLogs() {\n    const records = batchStore.map(log => {\n      return {\n        domain: log.url.split('/')[2],\n        started_at: parseInt(log.started_at / 1000),\n        duration: parseInt(log.duration / 1000)\n      }\n    })\n\n    return await request({\n      url: '/v1/chrome_ext/page_histories',\n      method: 'POST',\n      data: {\n        records,\n        time_zone_offset: -(new Date().getTimezoneOffset() * 60)\n      }\n    })\n  }\n\n\n  function getLocalLogs() {\n    return new Promise((resolve) => {\n      chrome.storage.local.get('batchStore', async (data) => {\n        if (data.batchStore) {\n          resolve(data.batchStore)\n        } else {\n          resolve([])\n        }\n      })\n    })\n  }\n\n  const pageHistories = {\n    addLog,\n    syncLogs,\n    getLocalLogs\n  }\n  window.pageHistories = pageHistories\n})()","/* eslint-disable no-debugger */\n/* eslint-disable no-console */\n/* global chrome, records, notifications */\n(function () {\n  \"use strict\";\n\n  let nextStage = 0\n  let continuousFoucsTimes = 0\n  let stages = []\n\n  genStages()\n\n  window.settings.on('inited', () => {\n    genStages()\n  })\n\n\n  function genStages() {\n    nextStage = 0\n    stages = []\n    if (!window.settings.workMode) {\n      stages = ['focus']\n    } else if (!window.settings.longBreakFrequency) {\n      stages = ['focus', 'break']\n    } else {\n      for (let i = 0; i < window.settings.longBreakFrequency - 1; i++) {\n        stages = [...stages, ...['focus', 'break']]\n      }\n      stages = [...stages, ...['focus', 'long_break']]\n    }\n  }\n\n\n  chrome.storage.onChanged.addListener((changes) => {\n    if (changes.settings) {\n      const oldSettings = changes.settings.oldValue\n      const newSettings = changes.settings.newValue\n      if (!oldSettings) {\n        genStages()\n        window.timer.applyStage()\n      } else {\n        if (oldSettings.workMode !== newSettings.workMode) {\n          genStages()\n        }\n\n        if (oldSettings.focusDuration !== newSettings.focusDuration) {\n          if (window.timer.status === 'stop') {\n            window.timer.applyStage()\n          }\n        }\n\n        if (oldSettings.breakDuration !== newSettings.breakDuration) {\n          if (window.timer.status === 'stop') {\n            window.timer.applyStage()\n          }\n        }\n\n        if (oldSettings.longBreakDuration !== newSettings.longBreakDuration) {\n          if (window.timer.status === 'stop') {\n            window.timer.applyStage()\n          }\n        }\n\n        if (oldSettings.longBreakFrequency !== newSettings.longBreakFrequency) {\n          genStages()\n        }\n\n        if (oldSettings.autoFocusCycle !== newSettings.autoFocusCycle) {\n          continuousFoucsTimes = 0\n        }\n      }\n\n    }\n\n  });\n\n  function sendMessageToContentScript(message) {\n    chrome.tabs.query({}, function (tabs) {\n      for (let tab of tabs) {\n        if (tab.url) {\n          let domain = tab.url.split('/')[2]\n          if (window.settings.immersiveMode) {\n            const whiteItem = window.settings.whiteList.find(whiteItem => {\n              return domain.includes(whiteItem)\n            })\n            if (!whiteItem) {\n              chrome.tabs.sendMessage(tab.id, message);\n            }\n          }\n        }\n      }\n    });\n  }\n\n  chrome.browserAction.setBadgeBackgroundColor({\n    color: '#8E8E93'\n  });\n  window.timer = function () {\n\n    let timer = {\n      status: 'stop',\n      started_at: 0,\n      duration: 5000,\n      remain: 5000,\n      immersiveMode: false\n    }\n\n    let finishedAt = null\n\n    let timerHandle = null\n    applyStage()\n\n    function start() {\n      play()\n      window.dispatchEvent(new Event('timer-start'))\n      if (timer.stage === 'focus') {\n        if (finishedAt && (+new Date() > finishedAt + 60 * 60 * 1000)) {\n          nextStage = 0\n        }\n      }\n    }\n\n    function continuePlay() {\n      timer.status = 'playing'\n\n      let continuedAt = +new Date();\n      records.addPauseDuration(continuedAt)\n      timer.status = \"playing\";\n      let remain = timer.remain\n      clearInterval(timerHandle);\n      timerHandle = null;\n      timerHandle = setInterval(() => {\n        timer.remain = remain - (+new Date() - continuedAt);\n        let badgeText = Math.ceil(timer.remain / 1000 / 60).toString()\n        if (timer.remain <= 0) {\n          finish()\n          badgeText = ''\n        }\n        if (timer.stage === 'focus') {\n          chrome.browserAction.setBadgeText({\n            text: badgeText\n          });\n          sendMessageToContentScript({\n            type: 'focusing',\n            remain: timer.remain\n          })\n        } else if (['break', 'long_break'].includes(timer.stage)) {\n          chrome.browserAction.setBadgeText({\n            text: chrome.i18n.getMessage('badgeTestRest')\n          });\n        }\n      }, 500);\n    }\n\n    function play() {\n      timer.status = 'playing'\n\n      let startedAt = +new Date();\n      timer.started_at = startedAt;\n      timer.status = \"playing\";\n      let remain = timer.remain\n      clearInterval(timerHandle);\n      timerHandle = null;\n      timerHandle = setInterval(() => {\n        timer.remain = remain - (+new Date() - startedAt);\n        let badgeText = Math.ceil(timer.remain / 1000 / 60).toString()\n        if (timer.remain <= 0) {\n          finish()\n          badgeText = ''\n        }\n        if (timer.stage === 'focus') {\n          chrome.browserAction.setBadgeText({\n            text: badgeText\n          });\n          sendMessageToContentScript({\n            type: 'focusing',\n            remain: timer.remain\n          })\n        } else if (['break', 'long_break'].includes(timer.stage)) {\n          chrome.browserAction.setBadgeText({\n            text: chrome.i18n.getMessage('badgeTestRest')\n          });\n        }\n      }, 500);\n    }\n\n    function pause() {\n      clearInterval(timerHandle);\n      timerHandle = null;\n      // timer.duration = timer.remain;\n      timer.status = \"pause\";\n      timer.paused_at = +new Date()\n    }\n\n    function stop() {\n      clearInterval(timerHandle);\n      timerHandle = null;\n      if (timer.stage === 'focus') {\n        records.addPauseDuration(+new Date())\n        records.addSceneDuration()\n        records.reportedData(false)\n      }\n      timer.remain = timer.duration;\n      timer.status = \"stop\";\n      records.resetReportData()\n      nextStage = 0\n      continuousFoucsTimes = 0\n      applyStage()\n    }\n\n    function skip() {\n      if (this.stage !== 'focus') {\n        finish(true)\n      }\n    }\n\n    function finish(dontNotification = false) {\n      const isLastStage = window.settings.autoFocusCycle && continuousFoucsTimes + 1 >= window.settings.autoFocusCycle\n\n      if (timer.stage === 'focus') {\n        const nextStageisLongBreak = stages[nextStage + 1] === 'long_break'\n        records.addSceneDuration()\n        records.reportedData(true)\n        if (!dontNotification) {\n          notifications.focusFinish({\n            workMode: window.settings.workMode,\n            autoFocus: window.settings.autoFocus,\n            autoBreak: window.settings.autoBreak\n          }, timer.duration, records.data.today_times + 1, window.settings.longBreakFrequency, isLastStage, nextStageisLongBreak)\n        }\n      } else {\n\n        records.reportedBreakData(true)\n        if (!dontNotification) {\n          if (isLastStage) {\n            notifications.lastBreakFinish({\n              workMode: window.settings.workMode,\n              autoFocus: window.settings.autoFocus,\n              autoBreak: window.settings.autoBreak\n            })\n          } else {\n            notifications.breakFinish({\n              workMode: window.settings.workMode,\n              autoFocus: window.settings.autoFocus,\n              autoBreak: window.settings.autoBreak\n            })\n          }\n        }\n      }\n      clearInterval(timerHandle);\n      timerHandle = null;\n      timer.status = \"finish\";\n      records.resetReportData()\n      window.dispatchEvent(new Event('timer-finish'))\n\n      if (timer.stage === 'focus') {\n        finishedAt = +new Date()\n      }\n      setNextStage()\n      let stage = stages[nextStage]\n      applyStage()\n      if (window.settings.workMode && stage === 'focus' && window.settings.autoFocus) {\n        continuousFoucsTimes += 1\n        if (!window.settings.autoFocusCycle || continuousFoucsTimes < window.settings.autoFocusCycle) {\n          start()\n        } else {\n          continuousFoucsTimes = 0\n        }\n      } else if (window.settings.workMode && ['break', 'long_break'].includes(stage) && window.settings.autoBreak) {\n        start()\n      }\n    }\n\n    function setNextStage() {\n      if (nextStage + 1 >= stages.length) {\n        nextStage = 0\n      } else {\n        nextStage += 1\n      }\n    }\n\n    function applyStage() {\n      let stage = stages[nextStage]\n      switch (stage) {\n        case 'focus':\n          timer.duration = window.settings.focusDuration\n          timer.remain = window.settings.focusDuration\n          break;\n\n        case 'break':\n          timer.duration = window.settings.breakDuration\n          timer.remain = window.settings.breakDuration\n          break;\n\n        case 'long_break':\n          timer.duration = window.settings.longBreakDuration\n          timer.remain = window.settings.longBreakDuration\n          break;\n      }\n      timer.status = 'stop'\n      timer.started_at = 0\n      timer.stage = stage\n      chrome.browserAction.setBadgeText({\n        text: ''\n      });\n    }\n\n    function reset() {\n      timer.status = 'stop'\n      timer.started_at = 0\n      records.resetReportData()\n      chrome.browserAction.setBadgeText({\n        text: ''\n      });\n      applyStage()\n    }\n\n    function setFocusDuration(ms) {\n      window.settings.focusDuration = ms\n      chrome.storage.sync.set({\n        focusDuration: ms\n      })\n      applyStage()\n    }\n\n    timer.start = start\n    timer.continue = continuePlay\n    timer.stop = stop\n    timer.pause = pause\n    timer.skip = skip\n    timer.reset = reset\n    timer.setFocusDuration = setFocusDuration\n    timer.applyStage = applyStage\n    return timer\n  }()\n})()","/* eslint-disable no-debugger */\n/* eslint-disable no-console */\n/* global request, scenes, records */\nasync function getScenes() {\n    let scenes\n    try {\n      const configs = await request({\n        url: '/v1/chrome_ext/configs',\n      })\n      scenes = configs.scenes\n    } catch (e) {\n      scenes = window.scenes\n    }\n    return scenes\n  }\n  (async function () {\n    \"use strict\";\n    window.picker = await async function () {\n      let scenes = await getScenes()\n\n      const picker = {\n        scenes,\n        current: 0\n      }\n      const scenesCount = scenes.length\n      picker.next = () => {\n        let current = picker.current\n        if (picker.current >= scenesCount - 1) {\n          current = 0\n        } else {\n          current += 1\n        }\n        picker.setIndex(current)\n      }\n      picker.prev = () => {\n        let current = picker.current\n        if (picker.current <= 0) {\n          current = scenesCount - 1\n        } else {\n          current -= 1\n        }\n        picker.setIndex(current)\n      }\n      picker.setIndex = (index) => {\n        if (picker.current !== index) {\n          records.addSceneDuration()\n          picker.current = index\n          window.dispatchEvent(new CustomEvent('picker-change', {\n            detail: {\n              current: picker.current\n            }\n          }))\n        }\n      }\n      return picker\n    }()\n  })()","/* eslint-disable no-debugger */\n/* eslint-disable no-console */\n\n(function () {\n  const audio = document.getElementById('audio');\n\n  async function adjustVolume(newVolume) {\n    let element = audio\n    let duration = 1000\n    let easing = swing\n    let interval = 13\n    let originalVolume = element.volume;\n    if (originalVolume === newVolume) {\n      return Promise.resolve();\n    }\n    let direction = originalVolume > newVolume ? 'toLower' : 'toHigher'\n    let delta = newVolume - originalVolume;\n    if (!delta || !duration || !easing || !interval) {\n      element.volume = newVolume;\n      return Promise.resolve();\n    }\n    let ticks = Math.floor(duration / interval);\n    let tick = 1;\n    return new Promise((resolve) => {\n      let timer = setInterval(() => {\n        let volume = originalVolume + (\n          easing(tick / ticks) * delta\n        );\n        ++tick\n        element.volume = volume\n        if (\n          (direction === 'toLower' && element.volume <= newVolume) ||\n          (direction === 'toHigher' && element.volume >= newVolume)) {\n          element.volume = volume\n          clearInterval(timer);\n          resolve();\n        }\n      }, interval);\n    });\n  }\n\n  function swing(p) {\n    return 0.5 - Math.cos(p * Math.PI) / 2;\n  }\n\n  window.player = function () {\n    const player = {\n      status: 'stop',\n      progress: 0,\n      muted: audio.muted\n    }\n    player.setUrl = (src) => {\n      if (audio.src !== src) {\n        let playFlag = !audio.paused && !audio.ended\n        audio.src = src\n        if (playFlag) {\n          audio.play()\n        }\n      }\n    }\n    player.play = () => {\n      audio.volume = 1\n      if (audio.paused || audio.ended) {\n        audio.play()\n      }\n      adjustVolume(1)\n      player.status = 'playing'\n    }\n    player.pause = () => {\n      console.log('onPause:', audio.paused)\n      if (audio.played) {\n        audio.pause()\n        player.status = 'pause'\n      }\n    }\n    player.stop = () => {\n      console.log('stop')\n      player.status = 'stop'\n      adjustVolume(0).then(() => {\n        if (player.status === 'stop') {\n          audio.pause()\n          // audio.currentTime = 0\n        }\n      })\n    }\n    player.muteOn = () => {\n      audio.muted = false\n      player.muted = false\n    }\n    player.muteOff = () => {\n      audio.muted = true\n      player.muted = true\n    }\n\n    audio.addEventListener('timeupdate', () => {\n      player.progress = Math.floor((audio.currentTime / audio.duration) * 100)\n    }, false);\n\n    audio.addEventListener('play', () => {\n      console.log('play')\n      window.dispatchEvent(new Event('player-play'))\n    })\n\n    audio.addEventListener('pause', () => {\n      console.log('pause')\n      window.dispatchEvent(new Event('player-pause'))\n    })\n\n    audio.addEventListener('abort', () => {\n      console.log('stop')\n    })\n\n    return player\n  }()\n}())","/* eslint-disable no-debugger */\n/* eslint-disable no-console */\n/* global chrome, timer */\n\n(function () {\n  \"use strict\";\n\n  const ring = document.getElementById('ring');\n  ring.src = 'https://pics.tide.moreless.io/chrome/notification.mp3'\n\n  function genGuid() {\n    function s4() {\n      return Math.floor((1 + Math.random()) * 0x10000)\n        .toString(16)\n        .substring(1);\n    }\n    return (\n      s4() +\n      s4() +\n      \"-\" +\n      s4() +\n      \"-\" +\n      s4() +\n      \"-\" +\n      s4() +\n      \"-\" +\n      s4() +\n      s4() +\n      s4()\n    );\n  }\n\n  function formatDuration(duration) {\n    const totalMin = parseInt(duration / 60);\n    const sec = duration % 60;\n    const min = totalMin % 60;\n    const hour = parseInt(totalMin / 60);\n    if (hour) {\n      return `${hour} ${chrome.i18n.getMessage(\"simplifiedHr\")} ${min} ${chrome.i18n.getMessage(\"simplifiedMin\")}`;\n    } else if (min) {\n      return `${min} ${chrome.i18n.getMessage(\"simplifiedMin\")}`;\n    } else {\n      return `${sec} ${chrome.i18n.getMessage(\"simplifiedSec\")}`;\n    }\n  }\n\n  function createNotifications(notificationId, options) {\n    chrome.notifications.create(notificationId, options)\n    ring.play()\n  }\n\n  function focusFinish(state, duration, totalTimes, times, isLastStage, nextStageisLongBreak) {\n    const {\n      workMode,\n      autoFocus,\n      autoBreak\n    } = state\n    let title\n    let message\n    let buttons = []\n    duration = formatDuration(duration / 1000)\n    chrome.i18n.getMessage(\"notifications_focus_finish_title_0\", `${times}`)\n    if (!workMode) {\n      title = nextStageisLongBreak ? chrome.i18n.getMessage(\"notifications_focus_finish_title_1\", `${times}`) : chrome.i18n.getMessage(\"notifications_focus_finish_title_0\", `${duration}`)\n      message = chrome.i18n.getMessage(\"notifications_focus_finish_message_0\", `${totalTimes}`)\n    } else if (autoFocus && autoBreak) {\n      title = nextStageisLongBreak ? chrome.i18n.getMessage(\"notifications_focus_finish_title_1\", `${times}`) : chrome.i18n.getMessage(\"notifications_focus_finish_title_0\", `${duration}`)\n      message = nextStageisLongBreak ? chrome.i18n.getMessage(\"notifications_focus_finish_message_4\") : chrome.i18n.getMessage(\"notifications_focus_finish_message_3\")\n    } else if (autoBreak) {\n      title = nextStageisLongBreak ? chrome.i18n.getMessage(\"notifications_focus_finish_title_1\", `${times}`) : chrome.i18n.getMessage(\"notifications_focus_finish_title_0\", `${duration}`)\n      message = nextStageisLongBreak ? chrome.i18n.getMessage(\"notifications_focus_finish_message_4\") : chrome.i18n.getMessage(\"notifications_focus_finish_message_3\")\n    } else if (autoFocus) {\n      title = nextStageisLongBreak ? chrome.i18n.getMessage(\"notifications_focus_finish_title_1\", `${times}`) : chrome.i18n.getMessage(\"notifications_focus_finish_title_0\", `${duration}`)\n      message = nextStageisLongBreak ? chrome.i18n.getMessage(\"notifications_focus_finish_message_2\") : chrome.i18n.getMessage(\"notifications_focus_finish_message_1\")\n      buttons = [{\n          title: chrome.i18n.getMessage(\"notifications_buttons_0\")\n        },\n        {\n          title: chrome.i18n.getMessage(\"notifications_buttons_2\")\n        }\n      ]\n    } else {\n      title = chrome.i18n.getMessage(\"notifications_focus_finish_title_0\", `${duration}`)\n      message = chrome.i18n.getMessage(\"notifications_focus_finish_message_1\")\n      buttons = [{\n          title: chrome.i18n.getMessage(\"notifications_buttons_0\")\n        },\n        {\n          title: chrome.i18n.getMessage(\"notifications_buttons_2\")\n        }\n      ]\n    }\n\n    if (isLastStage) {\n      title = nextStageisLongBreak ? chrome.i18n.getMessage(\"notifications_focus_finish_title_4\", `${times}`) : chrome.i18n.getMessage(\"notifications_focus_finish_title_3\")\n      buttons = [{\n          title: chrome.i18n.getMessage(\"notifications_buttons_0\")\n        },\n        {\n          title: chrome.i18n.getMessage(\"notifications_buttons_3\")\n        }\n      ]\n    }\n\n    createNotifications(`focus_finish|${genGuid()}`, {\n      type: 'basic',\n      iconUrl: 'tide_48.png',\n      title,\n      message,\n      buttons\n    })\n  }\n\n  function breakFinish(state) {\n    const {\n      workMode,\n      autoFocus,\n      autoBreak\n    } = state\n    let title\n    let message\n    let buttons = []\n\n    if (!workMode) {\n      return\n    } else if (autoFocus && autoBreak) {\n      title = chrome.i18n.getMessage(\"notifications_break_finish_title_0\")\n      message = chrome.i18n.getMessage(\"notifications_break_finish_message_1\")\n    } else if (autoBreak) {\n      title = chrome.i18n.getMessage(\"notifications_break_finish_title_0\")\n      message = chrome.i18n.getMessage(\"notifications_break_finish_message_0\")\n      buttons = [{\n        title: chrome.i18n.getMessage(\"notifications_buttons_1\")\n      }]\n    } else if (autoFocus) {\n      title = chrome.i18n.getMessage(\"notifications_break_finish_title_0\")\n      message = chrome.i18n.getMessage(\"notifications_break_finish_message_1\")\n    } else {\n      title = chrome.i18n.getMessage(\"notifications_break_finish_title_0\")\n      message = chrome.i18n.getMessage(\"notifications_break_finish_message_0\")\n      buttons = [{\n        title: chrome.i18n.getMessage(\"notifications_buttons_1\")\n      }]\n    }\n    createNotifications(`break_finish|${genGuid()}`, {\n      type: 'basic',\n      iconUrl: 'tide_48.png',\n      title,\n      message,\n      buttons\n    })\n  }\n\n  function lastBreakFinish(state) {\n    const {\n      workMode\n    } = state\n    let title\n    let message\n    let buttons = []\n\n    if (!workMode) {\n      return\n    } else {\n      title = chrome.i18n.getMessage(\"notifications_break_finish_title_0\")\n      message = chrome.i18n.getMessage(\"notifications_break_finish_message_2\")\n      buttons = [{\n        title: chrome.i18n.getMessage(\"notifications_buttons_4\")\n      }]\n    }\n    createNotifications(`break_finish|${genGuid()}`, {\n      type: 'basic',\n      iconUrl: 'tide_48.png',\n      title,\n      message,\n      buttons\n    })\n  }\n\n  function focusFinishAction(buttonIndex) {\n    switch (buttonIndex) {\n      case 0:\n        timer.start()\n        break;\n      case 1:\n        timer.skip()\n        timer.start()\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  function breakFinishAction(buttonIndex) {\n    switch (buttonIndex) {\n      case 0:\n        timer.start()\n        break;\n\n      default:\n        break;\n    }\n\n  }\n\n  chrome.notifications.onButtonClicked.addListener((notificationId, buttonIndex) => {\n    const [notificationType, ] = notificationId.split('|')\n    switch (notificationType) {\n      case 'focus_finish':\n        focusFinishAction(buttonIndex)\n        break;\n      case 'break_finish':\n        breakFinishAction(buttonIndex)\n        break;\n\n      default:\n        break;\n    }\n  })\n\n  window.notifications = {\n    focusFinish,\n    breakFinish,\n    lastBreakFinish\n  }\n})();","/* eslint-disable no-console */\n/* global chrome, player, timer, settings, pageHistories */\nimport './utils/request.js'\nimport './background/settings.js'\nimport './background/records.js'\nimport './background/userinfos.js'\nimport './background/page-histories.js'\nimport './background/timer.js'\nimport './background/scenes.js'\nimport './background/scene-picker.js'\nimport './background/player.js'\nimport './background/notifications.js'\n\nwindow._gaq = window._gaq || [];\nwindow._gaq.push(['_setAccount', 'UA-75103409-6']);\nwindow._gaq.push(['_trackPageview']);\n\n(function () {\n  var ga = document.createElement('script');\n  ga.type = 'text/javascript';\n  ga.async = true;\n  ga.src = 'https://ssl.google-analytics.com/ga.js';\n  var s = document.getElementsByTagName('script')[0];\n  s.parentNode.insertBefore(ga, s);\n})();\n\nwindow.addEventListener(\n  \"timer-finish\",\n  () => {\n    player.stop();\n  },\n  false\n);\n\nwindow.addEventListener(\n  \"timer-start\",\n  () => {\n    setTimeout(() => {\n      if (timer.stage === 'focus') {\n        player.play();\n      }\n    }, 200);\n  },\n  false\n);\n\nwindow.addEventListener(\n  \"player-play\",\n  () => {\n    setTimeout(() => {\n      if (timer.status !== 'playing') {\n        timer.start();\n      }\n    }, 200);\n  },\n  false\n);\n\nwindow.addEventListener(\n  \"player-pause\",\n  () => {\n    setTimeout(() => {\n      if (timer.status === 'playing' && !['break', 'long_break'].includes(timer.stage)) {\n        if (settings.immersiveMode) {\n          timer.stop();\n        } else {\n          timer.pause();\n        }\n      }\n    }, 200);\n  },\n  false\n);\n\n\nchrome.runtime.onMessage.addListener(function (msg, sender) {\n  switch (msg.type) {\n    case 'closeCurrentTab':\n      chrome.tabs.remove(sender.tab.id)\n      break;\n    case 'addViewHistory':\n      pageHistories.addLog(msg.log)\n      break;\n    case 'stopFocus':\n      timer.stop()\n      player.stop()\n      break;\n    case 'loginWithCode':\n      window.loginWithCode(msg.code)\n      break;\n\n    default:\n      break;\n  }\n});\n\nwindow.syncData = async function () {\n  await window.initUserInfos()\n  window.refreshToken()\n}\n\nwindow.syncData()\nsetInterval(async () => {\n  window.refreshToken()\n}, 86400000);"],"sourceRoot":""}